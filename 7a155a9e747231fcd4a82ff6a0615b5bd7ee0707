{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "90280af7_21a5274d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2025-02-24T15:38:49Z",
      "side": 1,
      "message": "I agree, this is a missed feature, that would make many users happy when it is added.",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5e212ec6_17554718",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 4
      },
      "lineNbr": 0,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-02-24T20:54:01Z",
      "side": 1,
      "message": "Thanks for proposing this!",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "05d5fdd6_3c6dd361",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-02-24T21:14:35Z",
      "side": 1,
      "message": "This likely would make things less secure than it is today, I suspect that is why users cannot set their own today. Do we really want to enable this as part of this feature?",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35963939_299ef2c8",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-25T07:37:55Z",
      "side": 1,
      "message": "In what way does a manually set id make it less secure?\nWhen I read this I thought of short-term tokens that you create for dev or PoC were an id (or at least label) like \"Gerrit ITS service poc\" that would make it easy to identify where your tokens are used and for what.",
      "parentUuid": "05d5fdd6_3c6dd361",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a3978f8_5258d3be",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-02-25T08:02:11Z",
      "side": 1,
      "message": "I believe that @thomas.draebing@sap.com refers to the ability to _label_ credentials, similarly to what you do today with the SSH keys.\n\nNaming or labeling a password doesn\u0027t make it less secure, as you would still be required to enter the full password upton authentication.",
      "parentUuid": "35963939_299ef2c8",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "06534cbd_418bbdae",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T08:11:05Z",
      "side": 1,
      "message": "It seems you misunderstood my intention. I don\u0027t mean that the user can set a password, but the user can assign an ID/name as a reference to a given password. This might be useful in some cases, e.g. if a user creates a password for use in a demo and wants to delete it afterwards. Then having a descriptive ID/name (e.g. `demo`) would make it easy to identify a given password.",
      "parentUuid": "05d5fdd6_3c6dd361",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d9901b1d_d21749d1",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 62,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-28T08:04:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "06534cbd_418bbdae",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "15a21287_cba56d8e",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T08:36:22Z",
      "side": 1,
      "message": "Currently, ExternalIdsCache is loading a single (large) ref of all external IDs.\n\nIf passwords are stored under `refs/users/` and their cache is being preloaded, we might as well preload all acount data into a cache.",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4c47f65e_849d1810",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T09:19:13Z",
      "side": 1,
      "message": "I am not sure whether it makes sense to preload accounts into the cache. Since accounts are usually not deleted, a lot of inactive account data would fill the cache. Also it would be a lot more data than external IDs.\nAdmins might however need to incraese the accounts cache.\nAlternatively, we could add a new dedictaed cache for tokens, similar to SSH-keys, which could be preloaded to reduce lookup times.",
      "parentUuid": "15a21287_cba56d8e",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4d8be1a1_a84b571d",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T18:57:03Z",
      "side": 1,
      "message": "\u003e ince accounts are usually not deleted, a lot of inactive account data would fill the cache. \nIt is possible to only load active accounts  to the cache.\n\nMy thread of thought was that reading all user references is an expensive operation. If we are already opening them all - when not speeding up account loading/querying?",
      "parentUuid": "4c47f65e_849d1810",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a3fd81d_b8626a37",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 78,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-28T08:04:54Z",
      "side": 1,
      "message": "With the new token storage, the passwords will not be in a single ref as external IDs, but distributed about all `refs/users/*`. I believe, the accounts cache is also not prefilled with all accounts (or am I wrong here?), so I doubt we should not do that with tokens as well. We should rather point admins to configure the tokens cache to be persistent and large enoug hto contain the data for all active users.",
      "parentUuid": "4d8be1a1_a84b571d",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bec26bdc_42b83872",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-02-24T21:14:35Z",
      "side": 1,
      "message": "I think it might be worth considering an approach like this:\n```\n[externalId \"username:admin\"]\n\taccountId \u003d 1000000\n\tpassword \u003d bcrypt0:4:Dd2OxFM73ALnECduYqYQEQ\u003d\u003d:QnQIFibB/Y04HvIY4UstiJhWagTtk6gN\n\texpires \u003d 2025-06-30T15:45Z\n\tid \u003d original\n\n\tpassword-1 \u003d bcrypt0:4:dddd....\n\texpires-1 \u003d 2025-06-01T14:30Z\n\tid-1 \u003d From Office\n        \t\n\tpassword-2 \u003d bcrypt0:4:eee....\n\texpires-2 \u003d 2025-06-01T14:30Z\n\tid-2 \u003d From Home\n```  \n  \nAs this keeps the info together, feels a bit simpler, and allows us likely more easily to keep backwards compatability.\n\nA similar alternative (not quite as backward compatible):\n\n```\n[externalId \"username:admin\"]\n\taccountId \u003d 1000000\n\tpassword \u003d bcrypt0:4:Dd2OxFM73ALnECduYqYQEQ\u003d\u003d:QnQIFibB/Y04HvIY4UstiJhWagTtk6gN\n\texpires \u003d 2025-06-30T15:45Z\n\tpassword-id \u003d original\n\n\tpassword-1 \u003d bcrypt0:4:dddd....\n\tpassword-1-expires \u003d 2025-06-01T14:30Z\n\tpassword-1-id \u003d From Office\n        \t\n\tpassword-2 \u003d bcrypt0:4:eee....\n\tpassword-2-expires \u003d 2025-06-01T14:30Z\n\tpassword-2-id \u003d From Home\n```",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa2d1acc_f599017d",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-25T07:37:55Z",
      "side": 1,
      "message": "I\u0027m personally more in favor of the initial proposal of storing it in a `passwords` file under the user ref.\nThe less you can bastardize and burden new functionality with old solutions the better in my book.\nIf given a couple of versions to stop using the internal `ExternalId` API should be enough for most consumers to adapt.",
      "parentUuid": "bec26bdc_42b83872",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4bc47d9_cbfc75a1",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-02-25T08:02:11Z",
      "side": 1,
      "message": "We must tolerate and read the existing format as well, otherwise we won\u0027t be able to support a rolling upgrade.",
      "parentUuid": "aa2d1acc_f599017d",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "468f81ce_8f6e31b0",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T08:11:05Z",
      "side": 1,
      "message": "I thoought about this as well, but found it kind of messy. We would end up with an ever growing ID for passwords of each user, with gaps where passwords were deleted. Considering the jgit API for reading config values, this would already require a lot of additional code to just collect all passwords. It seems like a hack of the git config format just to not have to fix a design decision that turned out to be not ideal. To me it anyway seems strange that an `ExternalId` contains a password, which is in itself not an ID.",
      "parentUuid": "bec26bdc_42b83872",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58d6c227_24d80cc7",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-25T08:41:19Z",
      "side": 1,
      "message": "\u003e We must tolerate and read the existing format as well, otherwise we won\u0027t be able to support a rolling upgrade.\n\nI think there\u0027s a way to have old and new in parallel that would allow for a smooth transition for all parties and a clean removal of ExternalId passwords after a couple of releases.\nhttps://gerrit-review.googlesource.com/c/homepage/+/455521/2..5/pages/design-docs/http-password-with-lifetime/solution.md#b53",
      "parentUuid": "468f81ce_8f6e31b0",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97954d39_814fabd3",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 112,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-28T08:04:54Z",
      "side": 1,
      "message": "Let me list the options on the table and put it up for a vote to close this discussion:\n\n1) A hard cut (Only the new format will be supported; offline migration required, if users should be able to use their existing passwords as tokens)\n2) The new format will be used for all newly created tokens, a fallback to the old HTTP password exists in case no new token was generated. Old REST API endpoints will be kept as aliases for new REST API endpoints to ensure backwards compatibility. Offline and online migration proceduresare optionally available to migrate all existing HTTP passwords to tokens in one go.\n3) For a few versions, the behaviour will be fully configurable, i.e. admins can decide whetehr to support the old HTTP password or the new tokens or both [1].\n\n[1] https://gerrit-review.googlesource.com/c/homepage/+/455521/2..5/pages/design-docs/http-password-with-lifetime/solution.md#b53\n\nI would vote for **2)**.\n1) is out of the game for the obvious reason that we need zero downtime upgrades and I believe that 3) would lead to a lot more work and code complexity with too little to gain.",
      "parentUuid": "58d6c227_24d80cc7",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c1f45bc_67e7861b",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T08:36:22Z",
      "side": 1,
      "message": "How will the name be used? I didn\u0027t see any mentions of it in the previous section.",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e9c016a7_5cbd8e31",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 122,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T09:19:13Z",
      "side": 1,
      "message": "The name is just for users to have a reference to a password. They might for example create a password to be used for a certain automation and name it accordingly. Then it is easy to identify it, if they want to rotate or delete it.",
      "parentUuid": "3c1f45bc_67e7861b",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ffc967e7_5ef63df1",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T08:36:22Z",
      "side": 1,
      "message": "I think 7 and 8 should switch places.",
      "fixSuggestions": [
        {
          "fixId": "93a23916_1e063d29",
          "description": "prompt_to_edit API",
          "replacements": [
            {
              "path": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
              "range": {
                "startLine": 128,
                "startChar": 0,
                "endLine": 129,
                "endChar": 0
              },
              "replacement": "7) Add option to enforce a lifetime for passwords.\n"
            },
            {
              "path": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
              "range": {
                "startLine": 130,
                "startChar": 0,
                "endLine": 131,
                "endChar": 0
              },
              "replacement": "8) Allow to configure a lifetime for passwords.\n"
            }
          ]
        }
      ],
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "26bcc019_988a2ed2",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T09:19:13Z",
      "side": 1,
      "message": "I believe the order should stay as it is. First users should be able to configure a lifetime for their tokens and then admins should be able to set an upper limit for that lifetime. I changed the sentences to make them clearer.",
      "parentUuid": "ffc967e7_5ef63df1",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "19ab71d9_81dc3653",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 130,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T18:57:03Z",
      "side": 1,
      "message": "Thanks!",
      "parentUuid": "26bcc019_988a2ed2",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64ebc7cd_10c17b7e",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T08:36:22Z",
      "side": 1,
      "message": "Per user? Per host? What\u0027s the goal of this tool?",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02c852ac_3c535abd",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T09:19:13Z",
      "side": 1,
      "message": "Per host. If this feature gets enabled, the old HTTP passwords won\u0027t have yet have a lifetime. They would only get one, if the users would rotate them, which they might not do. So this tool could be used by an admin to set a default lifetime for all existing tokens, which will cause all users to have to rotate at one point. Alternatively, we could add an option to the gerrit config which sets a default expiry date for all tokens that do not have one. This would not require a migration, but would still force users to rotate their existing tokens if they do not yet have a lifetime set.",
      "parentUuid": "64ebc7cd_10c17b7e",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "24b3e3aa_e2129d4f",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1146706
      },
      "writtenOn": "2025-02-25T18:57:03Z",
      "side": 1,
      "message": "The later suggestion sounds much more sustainable.",
      "parentUuid": "02c852ac_3c535abd",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c068fc4_d9f70a16",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/solution.md",
        "patchSetId": 4
      },
      "lineNbr": 132,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-28T08:04:54Z",
      "side": 1,
      "message": "It might however have an issue with the following scenario:\n\n1) The existing configuration allows a max lifetime of 90d.\n2) Admins want to enforce a maximum lifetime of 30d.\n3) Admins set a new expiry date 30d from now in the gerrit.config\n4) All tokens that have an expiry date after that date would use the configured one.\n5) But what of passwords created after the configuration was applied with a lifetime of 30d, which would expire after the configured date, but have a valid lifetime.\n\nThus, I fear a rewrite in notedb is not avoidable. However, a typical site has a manageable number of accounts and I believe that a background job could do the migration asynchronously without affecting performance significantly. I would thus suggest to implement such a background job for online migration that can be configured, similar to the process to migrate to case insensitive usernames.",
      "parentUuid": "24b3e3aa_e2129d4f",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6412416c_188a73a8",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2025-02-24T15:38:49Z",
      "side": 1,
      "message": "Do you mean that the default should be no limited lifetime? \nMaybe we should enforce a limited lifetime with a reasonable maximum lifetime as default instead and follow best security practices, or will this have consequences that we should avoid?",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "25a6973a_d32aefb6",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-02-24T20:54:01Z",
      "side": 1,
      "message": "I don\u0027t think changing this as part of this effort would be a good idea, that seems like an installation\u0027s decision. Providing the ability to do this however seems good.\n\nIronically NSA recommends no longer rotating passwords unless there is a known breach.",
      "parentUuid": "6412416c_188a73a8",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "94171cc2_d4ef39ca",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-25T07:37:55Z",
      "side": 1,
      "message": "I think a middle ground is preferable.\nSet a limited lifetime as the default default (say 6 months) but allow for the administrator to configure default to be whatever they wish.",
      "parentUuid": "25a6973a_d32aefb6",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0169491e_1450589e",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T08:11:05Z",
      "side": 1,
      "message": "My suggestion would be:\n\n- At least in the beginning don\u0027t set a limited lifetime, since that is backward compatible and would allow to support the previous format for a while.\n- As mentioned in the design doc, there will be a tool to rewrite the password entries and to set a default expiration time for existing passwords, which can be chosen by the admin.\n- Admins can configure whetehr to allow an unlimited lifetime for tokens at all and if not, what the maximum lifetime would be.\n- Since I am also a fan of security by default, I would suggest that with the update that removes the support for the old format the default should change to allow a maximum lifetime for tokens to be e.g. 90 days. Admins can then still decide to allow an unlimited lifetime.",
      "parentUuid": "94171cc2_d4ef39ca",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cd2178d7_c191d1ac",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1135623
      },
      "writtenOn": "2025-02-25T08:56:48Z",
      "side": 1,
      "message": "Thomas that sounds like a good plan.  \n\u003eIronically NSA recommends no longer rotating passwords unless there is a known breach.\n\nI believe that the recommendation is for user specified passwords. For passwords/tokens that Gerrit creates many of the disadvantages related to user password fatigue does not apply.",
      "parentUuid": "0169491e_1450589e",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8069ce86_4da26bd1",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 55,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-26T06:57:13Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "cd2178d7_c191d1ac",
      "range": {
        "startLine": 51,
        "startChar": 0,
        "endLine": 55,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c1341ce_f191b796",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-02-24T20:54:01Z",
      "side": 1,
      "message": "This doesn\u0027t feel like an AC, but rather an implementation detail. Can you express this as something more abstract like \"There should be no need for user intervention related to this feature during an upgrade\"?",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bdf9d456_c3abbb3a",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-02-25T08:05:19Z",
      "side": 1,
      "message": "+1 to @mfick@nvidia.com comment: depending on the solution, a migration tool may or may not be needed. It should not stay in the requirements section but moved into the solution design.",
      "parentUuid": "3c1341ce_f191b796",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "893d7486_160dd4fd",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 57,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T08:11:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3c1341ce_f191b796",
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "601933b4_591f3dca",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 3604707
      },
      "writtenOn": "2025-02-24T20:54:01Z",
      "side": 1,
      "message": "Should we consider using this term instead of passwords for this proposal? i.e are we really talking about converting the http password to a token approach since it better matches the use of the http password?",
      "range": {
        "startLine": 73,
        "startChar": 22,
        "endLine": 73,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a46ac695_76b7f52f",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-25T07:37:55Z",
      "side": 1,
      "message": "I concur. I think it would be beneficial if we changed this.\nShifting the terminology to `token` would more correctly describe this feature.\nIf we keep on calling it `password` it will likely spur unnecessary confusion during security discussions (I\u0027m now referring to e.g. Gerrit-admin vs Security-group discusssions in each individual organization (it already has caused such confusion)).\n`password`- envoques the concept of long-lived and outdated forms of authentication fraught with security-breach.\n`tokens` - has the air of a more modern authentication paradigm.",
      "parentUuid": "601933b4_591f3dca",
      "range": {
        "startLine": 73,
        "startChar": 22,
        "endLine": 73,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "95d07db7_6b02503e",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-02-25T08:05:19Z",
      "side": 1,
      "message": "+1 to both comments: often customers believe that this is a _user chosen password_ and therefore automatically consider this as low security/entropy. Let\u0027s rename it to _authentication token_ that represents what it really is.",
      "parentUuid": "a46ac695_76b7f52f",
      "range": {
        "startLine": 73,
        "startChar": 22,
        "endLine": 73,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "db6db6cd_708ff099",
        "filename": "pages/design-docs/multiple-http-passwords-with-lifetime/use-cases.md",
        "patchSetId": 4
      },
      "lineNbr": 73,
      "author": {
        "id": 1065256
      },
      "writtenOn": "2025-02-25T08:11:05Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a46ac695_76b7f52f",
      "range": {
        "startLine": 73,
        "startChar": 22,
        "endLine": 73,
        "endChar": 29
      },
      "revId": "7a155a9e747231fcd4a82ff6a0615b5bd7ee0707",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}