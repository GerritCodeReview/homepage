---
title: ""
hide_sidebar: true
hide_navtoggle: true
toc: false
---

# Overview

Gerrit has already a [parameter](https://gerrit-review.googlesource.com/Documentation/config-gerrit.html#gerrit.instanceName)
to define an identifier for the instances. This could be included in the events
generated by the different nodes.

## <a id="implementation"> Implementation

### Setup

The `instanceName` is currently set in the `gerrit.config`. It defaults to the
full hostname if not set.

### Propagation

Each event will need to be labelled with the name of the instance it has been
generated from.
The `com.google.gerrit.server.events.Event` will need to be modified to accommodate
the new parameter. `instanceName` defaults to the full hostname, hence Events
can always be signed.

# Current consumers compatibility

## Gerrit Jenkins Trigger Plugin

The addition of an `instanceName` in the Events wonâ€™t affect the Gerrit Jenkins
Trigger Plugin, since the DTO used is really lax and decoupled from Gerrit.
Additional fields added to the Event will just be ignored.

## Other plugins

I used [this query](https://github.com/search?q=org%3AGerritCodeReview+%22events.Event%22+NOT+Test&type=Code)
and [this other one](https://github.com/search?l=Java&q=org%3AGerritForge+%22events.Event%22+NOT+Test&type=Code)
to assess the plugins that might be impacted by the change of the
`com.google.gerrit.server.events.Event`.

The only plugins that would need adaptation with this change will be the
_multi-site_ and the _events-broker_ since they will have to start using `instanceName`
instead of the multi-site definition of `instanceId`.
