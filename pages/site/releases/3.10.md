---
title: "Gerrit 3.10.x"
permalink: 3.10.html
hide_sidebar: true
hide_navtoggle: true
toc: true
---

## Release highlights

### Java 17

The language level used for Gerrit source code stays on Java 11, however, Gerrit
is built and distributed for Java 17, which is the recommended JVM version for
running it in production.

### New and Improved APIs
* [Change 391494](https://gerrit-review.googlesource.com/391494) committer and author identities can be updated in change edit mode via REST
* [Change 390634](https://gerrit-review.googlesource.com/390634) REST API to list indexes and their versions
* [Change 20](https://gerrit-review.googlesource.com/20) REST API to create snapshot of Lucene indexes
* [Change 413837](https:gerrit-review.googlesource.com413837) REST endpoints for getting index info
* [Change 413838](https://gerrit-review.googlesource.com/413838) REST endpoint for reindex an index version
* [Change 409729](https://gerrit-review.googlesource.com/409729) Added REST endpoint to get the commit message of a change

### Less emails
* [Change 400822](https://gerrit-review.googlesource.com/400822) Reduce email spam, by not notifying existing reviewers
      when new ones are added.
* [Change 408557](https://gerrit-review.googlesource.com/408557) Changed attention set logic to add owner and uploader to attention set only when a reply requires the attention of the m
* [Change ](https://gerrit-review.googlesource.com/) Fix "reviewers by email" receiving more emails than intended
Support conditional attention set updates - commit 74a03beeb43dbbec6d99b708a1fa0a875cf887cd

### InstanceID aware Gerrit Events
* [Change 398917](https://gerrit-review.googlesource.com/398917) Add instanceId to Gerrit Events
* [Change 399618](https://gerrit-review.googlesource.com/399618) Populate project-created event with instanceId
* [Change 398918](https://gerrit-review.googlesource.com/398918) Ignore project-created events not produced locally

### Rebase merge commits
* [Change 393798](https://gerrit-review.googlesource.com/393798) Added support for rebasing merge commits in rebase submit strategies

### project~changeNumber Is now the recommended change identifier
* [Change 399319](https://gerrit-review.googlesource.com/399319) Support `change:project~changeNumber` query

### Stricter validation when updating copy-conditions
* [Change 409738](https://gerrit-review.googlesource.com/409738) Added validation for label copy conditions

### Configurable H2 cache pruning
* [Change ](https://gerrit-review.googlesource.com/) Make cache pruning schedule configurable - NOTE, BY DEFAULT IT SEEMS ENABLED

#### More navigable Included In view
* [Change 402597](https://gerrit-review.googlesource.com/402597) Added support for filtering branches/tags in plugins.

### Suggest Fixes improvements
* [Change 403542](https://gerrit-review.googlesource.com/403542) Allow fix-suggestions with human comments
Use user setting for opt out from suggest code while commenting - commit ba95beb5a265e6e202b14c147aa9b8668ac66f6e
Add 'suggestFix' method to 'SuggestionProvider' for complex suggestions - commit 04f06bba0c1f927cc4f8e6601bc612646e0b9733
Enable "Show Edit" and "Apply Edit" for fix_suggestions within comments - commit 03ec98d0de08ce6441c7487be932bda48ee83f02
Support multiple suggestions in comment - commit 39918c9e6d3b9866081777037126e86dd28a91dd
Allow updating draft comments with fix suggestions - commit 82d8a242369ecb280e1148a5c9eae96ac48a1e6c
Show fix_suggestions in Comment - commit bf61a4ebf5b0245d8c06bdd347ac7cd41492334f
### Native log rotation
* [Change 412417](https://gerrit-review.googlesource.com/412417) Add option to regularly delete old logs

### Optional event generation when Reindexing
* [Change 417000](https://gerrit-review.googlesource.com/417000) Allow to reindex changes without notifying listeners

### New Tag sorting options
Allow listing tags in specific order

## Important Notes
* [Change 392460](https://gerrit-review.googlesource.com/392460) Added commit sha and change number to
    "commit already exists (in change)" Push Rejected response.
* [Change 395398](https://gerrit-review.googlesource.com/395398) Fix comment directly link pointing to a change imported from other Gerrit server-ids
* [Change ](https://gerrit-review.googlesource.com/) The commit-msg hook now operates as a no-op for temporary commits, which are identified by a lowercase word followed by an exclamation mark (e.g., fixup!, squash!). Configure gerrit.createChangeId to 'always' to force creation on these cases.
* [Change 396517](https://gerrit-review.googlesource.com/396517) allow a max_count = 50 for label predicates for SRs.
* [Change 399237](https://gerrit-review.googlesource.com/399237) Improved WorkQueue task thread names
* [Change 412064](https://gerrit-review.googlesource.com/412064) Fixed PostReview to not execute the submit rules twice when the SUBMIT_REQUIREMENTS or SUBMITTABLE options were requested
Log events emitted if sendemail is restricted by config as debug trace
* [Change 404897](https://gerrit-review.googlesource.com/404897) Optionally allow to reuse existing documents during reindexing

## Schema and index changes

The `accounts` index version has been increased to version 14. The `changes` index version has been increased to version 85. The `groups` index version has been increased to version 11. The `projects` index version has been increased to version 9.

NoteDB Schema changes
Protect writing fixSuggestions in HumanComments by flag - commit 50762a04c3b8c8f3f4416490d38b22e76f6ccadc ?
* [Change ](https://gerrit-review.googlesource.com/) Allow fix-suggestions with human comments - Should change anything, just checking

## Online index schema upgrade from 3.9
By default, if you’re upgrading from 3.9, the index is automatically rebuilt upon Gerrit startup after the upgrade.

If you’re upgrading from 3.8 or an earlier version, you must use the Offline upgrade steps below.

## Offline upgrade
- Download the new gerrit.war
- Stop Gerrit
- Ensure all installed plugins are compatible with the new API
- Run init
   `java -jar gerrit.war init -d site_path --batch`
- Reindex
  If you are upgrading from a 3.9 versions you don’t need to run reindex (see Online index schema upgrade from 3.9 above). If you still want to you will need to run reindex:

  `java -jar gerrit.war reindex -d site_path`
  If you are upgrading from a 3.8 or an earlier version, you must run a reindex of all indexes:

  `java -jar gerrit.war reindex -d site_path`
  See the [reindex](https://gerrit-documentation.storage.googleapis.com/Documentation/3.9.0/pgm-reindex.html) command for other options.

## Breaking Changes
* [Change 407417](https://gerrit-review.googlesource.com/407417)
Branch links in change metadata now ignore status
* [Change 404717](https://gerrit-review.googlesource.com/404717)
Deprecate review command without project argument
* [Change 415877](https://gerrit-review.googlesource.com/415877)
Fix issue with gr-file-list-header not working correctly after writing a comment
* [Change 412438](https://gerrit-review.googlesource.com/412438)
Fix behavior of rules.enable config to disable prolog // I think?
* [Change 413537](https://gerrit-review.googlesource.com/413537)
Added new current_revision_number field to ChangeInfo that contains the current patch set number

* [Change 400821](https://gerrit-review.googlesource.com/400821)
AutoMerger#lookupFromGitOrMergeInMemory: Remove mergeStrategy parameter - commit 444fdb092957b036b6c53094e02709bcf55297f5
* [Change 401198](https://gerrit-review.googlesource.com/401198)
DiffOperations: Remove unused diffOptions parameter from load methods - commit 9c0e8ff93aaf04aa4d9de6a6887ce54978437cfb
* [Change x](https://gerrit-review.googlesource.com/x)
Deprecated robot-comments
* [Change 402757](https://gerrit-review.googlesource.com/402757)
CommitValidationListener: Add warning to not use DiffOperations - commit 2ee0f7311904993acf2be1657306a07e2a7b5931
* [Change 411477](https://gerrit-review.googlesource.com/411477)
Address JSON parsing errors on 204 No Content - commit 1d8a1a300124497bfa1281c7cdd2946cf083c9b3

## Other changes
* [Change x](https://gerrit-review.googlesource.com/x)
* [Change 394446](https://gerrit-review.googlesource.com/394446) fix tabbing for non-emojis starting with colon
* [Change 394795](https://gerrit-review.googlesource.com/394795) Remove ActionType, ChangeActions and RevisionActions enums forwarded as properties from ChangeActionsPluginApi implementation
* [Change 395461](https://gerrit-review.googlesource.com/395461) Fix emoji selector for all keys
* [Change 398500](https://gerrit-review.googlesource.com/398500) Support Bazel user configuration file in gerrit tree
* [Change 393255](https://gerrit-review.googlesource.com/393255) Add support for BuildBuddy RBE provider
* [Change 399797](https://gerrit-review.googlesource.com/399797) Enable highlighting for Qt code components
* [Change 401977](https://gerrit-review.googlesource.com/401977) Use RetryScheduler with backoff when server returns 429
* [Change 401457](https://gerrit-review.googlesource.com/401457) commit message edit can be performed with a secondary email using REST API
* [Change 405980](https://gerrit-review.googlesource.com/405980) Reviewer updates for reviewers by email are returned in change details
* [Change 404738](https://gerrit-review.googlesource.com/404738) Fail review command if multiple changes are selected
* [Change 410145](https://gerrit-review.googlesource.com/410145) Fixed internal server error when posting a review with a ReviewerInput that
* [Change 412617](https://gerrit-review.googlesource.com/412617) Fix bug that allows inserting a broken pack
* [Change 413077](https://gerrit-review.googlesource.com/413077) Plugins can use VersionedConfigFile to read/write a config file stored in git
* [Change 413540](https://gerrit-review.googlesource.com/413540) Added REST endpoints to list and get experiments
* [Change 404739](https://gerrit-review.googlesource.com/404739) Use project in review command
Show correct number of suggestions - commit 782ecfaec9d6bb6d513e639047bc43adf0d2a8a4
Fix WorkQueue bug to ensure reliable execution of scheduled tasks - commit a4c7a7384ef151b80ae45faca1450a90d9672ea5


## Plugin changes
Delete-Project: * [Change 383014](https://gerrit-review.googlesource.com/383014) Plugin Delete-Project archiveDeletedRepos option now also emits a Project Deletion event.

Update plugins/webhooks from branch 'master'
      to d864a2c71e261b39b89ea9425280fad425a336f3 // Updated to 2e5ec3b3bcf5e7ba50edba9eca3c15c8057ad6c2 with I4083ded04a2c5e20a386f9b3fe991c17ace4f3f3
Update plugins/replication from branch 'master'
      to 012f04240eafe6dfa21fd94e012e97498881c621
Update plugins/delete-project from branch 'master'
      to ea78b4b817151f47f6e3aca7bf1e90f14518caa1
Update plugins/download-commands from branch 'master'
      to 978e803c87416eb9e96236446b15b167017c0385
Download-Commands: * [Change 383014](https://gerrit-review.googlesource.com/383014) Added an option to omit SSH usernames from download commands            

## JGit changes
* [Change 401442](https://gerrit-review.googlesource.com/401442) Update jGit to ef53cb8a9
Update jgit to v6.8.0.202311291450-r-91-gc35deb6d8
* [Change ](https://gerrit-review.googlesource.com/) Update JGit to 74fa245b3
* [Change 415157](https://gerrit-review.googlesource.com/415157) Update JGit to c0b415fb0

## Documentation changes
* [Change 394736](https://gerrit-review.googlesource.com/394736) Reworked the project config documentation page
* [Change 395457](https://gerrit-review.googlesource.com/395457) Improved the submit requirements documentation
config-project-config: Rework the description of the groups file - commit 33d244dfde856489ab4c649c3cd17fcab4f604cd
config-project-config: Add a section about project inheritance - commit 83ae426f7b07ddcf5e9d769ed76fa606c4208744
config-project-config: Explain the format of access subsections - commit ff36a56da5c623ca34cd2d39b9bd036ac6380b33
config-project-config: Rework section about the project.config file - commit 962cb155efbfe8ef93e8e0f0c89a34d64aaa8d69
Further improve the submit requirements documentation page - commit 4b70339c4a9069fe080461d98d6bbedb693eb42b
config-submit-requirements.txt: Rework the decription of the label operator - commit 97673c70ea7153acc37af237c86245279667d4c6
config-submit-requirements.txt: Mention that 500 ISE may be returned for errors - commit 1f34e224bcfb53e35d3bbd31ac60c4c554821ec2
config-submit-requirements.txt: Explain config for dashboards - commit 6cf7ade5d63308ff2c6fa78debef8fe9ab8e4ca6
config-submit-requirements.txt: Include more details on testing SRs - commit 161523787791fb58ee9ef35c556e1d9351122b5d
Update instructions about filing security issues - commit 31ad78ad08aa1ac3f27772a251f0fecf8e0083b2
config-submit-requirements.txt: Explain relation between labels and SRs - commit 0ad6ccfd636866303899311ae78c64fd9646fe64
Update documentation for the ChangeInfo. - commit d0024cc0497275f79b323000fd6879c90d5d6d64
intro-user.txt: Update Tools sections - commit 78d2b0d4aa4a933a5121e63bd8604b5216a21c83
Document Byte Buddy issue with running mock tests - commit 08a0f279b15cedb4447238bfe9dcb6d5229a71ae
Suggest Reviewers: Document when accounts are visible - commit 076ce8efd3fad2538a3506a40384e84966f68ba6
submit-requirements.txt: Document how to restore SRs via REST - commit 53a316eefb59983c29376157dbfce80cad072431
Document how to make an account visible to all users when VISIBLE_GROUP is used - commit 5b8099c9c3640dd86eacc576116a38e4b7dec336
SR documentation: Mention that label function should be set to NoBlock - commit de48a09c7529b3a26d0f90f7e0052c3497b27b7e
Improve documentation of the `Owner` access right - commit 21d3d701026c81d63f7b8906d7682803822a1427
Project owner guide: Update references to the projects menu - commit 99700ff62097a6f01fb1b6820414476c77f6a104
Project owner guide: Update references to the groups menu - commit 06aeaffad0b36f3bff160b4b1e1708fc4c4786ac
Document that the Access screen allows to change the parent project - commit 93fd198b560e6a0e58eb884a11b6827b61574130
config-project-config.txt: List more REST endpoints to update the config - commit fc8f238c1a857d82c4f366f94de4ddbca6baeae6
Document behaviour of RetryScheduler - commit f958a72dd2a723b7dd32b577e6143aa7ae224ed9

## Other dependency changes

* [Change 389854](https://gerrit-review.googlesource.com/389854) Update protobuf version to 21.7
* [Change 408697](https://gerrit-review.googlesource.com/408697) update Soy library
* [Change 387360](https://gerrit-review.googlesource.com/387360) Update Bazel version to 7.0.0
* [Change 391534](https://gerrit-review.googlesource.com/391534) Bazel: Add support for JDK 21
* [Change 399333](https://gerrit-review.googlesource.com/399333) Update protobuf version to 25.1
* [Change 401385](https://gerrit-review.googlesource.com/401385) Update gitiles to 1.4.0
* [Change 402759](https://gerrit-review.googlesource.com/402759) Update commons-compress to 1.25.0
* [Change 399557](https://gerrit-review.googlesource.com/399557) Update ch.qos.reload4j:reload4j to 1.2.25
* [Change 388224](https://gerrit-review.googlesource.com/388224) Update org.apache.httpcomponents:httpcore to 4.4.16
* [Change 388221](https://gerrit-review.googlesource.com/388221) Update com.google.auto.value:auto-value to 1.10.4
* [Change 388223](https://gerrit-review.googlesource.com/388223) Update org.apache.httpcomponents:httpclient to 4.5.14
Bazel: Update RBE docker image to Ubuntu 22.04 and JDK 17 - commit bb951633681bda6edfaafd8e1401da20c962f434
Upgrade yarn deps (January 2024) - commit 6f304e90c4896e87d2bccdd6cf840bbfd1ea11b4
Update Truth to 1.3.0 (and its dep Guava to 33.0.0). - commit 23cec0474ae9d4e798af01c3f8e46ff747e0c1d4
Update Truth to 1.4.0. - commit 58cc425882d9dbaefac1e487fb3bccf541789c11
Update Truth to 1.4.2. - commit b7c7912b6a291f4ec840fed62ee6141d25008bfa



## Frontend changes
* [Change 397979](https://gerrit-review.googlesource.com/397979) account-chip hover-card shows correct email for author and committer
* [Change 397457](https://gerrit-review.googlesource.com/397457) Add syntax highlight support for cjs, cts, and mts file
* [Change 397857](https://gerrit-review.googlesource.com/397857) change edit UI supports updating author and committer identities
* [Change 400824](https://gerrit-review.googlesource.com/400824) Fix scrolling to diff rows covered by the header UI
* [Change 402837](https://gerrit-review.googlesource.com/402837) Revert CLs should still say Ready To Submit
* [Change 403437](https://gerrit-review.googlesource.com/403437) UI supports updating commit message using a registered secondary email
* [Change 407157](https://gerrit-review.googlesource.com/407157) Add plugin endpoint for account links
* [Change 407660](https://gerrit-review.googlesource.com/407660) Turn Reply button into Sign in button when logged out
* [Change 407820](https://gerrit-review.googlesource.com/407820) Improve reviewer autocomplete on restricted refs/branches
* [Change 407823](https://gerrit-review.googlesource.com/407823) Show checks findings on file list
* [Change 407825](https://gerrit-review.googlesource.com/407825) Prevent pencil wrapping by itself in change metadata
* [Change 408157](https://gerrit-review.googlesource.com/408157) Added support to update the reason why a user is in the attention set
* [Change 413237](https://gerrit-review.googlesource.com/413237) Fix browser BACK button when going to plugin pages
* [Change 413257](https://gerrit-review.googlesource.com/413257) Allow listing tags in descending order
* [Change 415877](https://gerrit-review.googlesource.com/415877) Fix issue with gr-file-list-header not working correctly after writing a comment
* [Change 416117](https://gerrit-review.googlesource.com/416117) gr-change-view: use change-model to update change object
* [Change 416260](https://gerrit-review.googlesource.com/416260) Diff processor was simplified. It does not split up into multiple async chunks of work anymore.
Disable dropdown items for downlading files >50 MB - commit 4d6bfaeea296052966898c3a0762324e31e039d3
Stop considering combo key after first hit - commit 73211f04726e95d1987d50b14af4328dbd3ea6fd
Only show the "Show Blame" button if blame is enabled. - commit 5f2bbd32c273e9f4ebcad3353780c0bbb3233b98
Add a `replysent` plugin event - commit 66f20ad0e96ef2f30602d02e7479ba147e59d710
Fix revision actions constantly showing as "loading" when not signed in - commit 4af8c1d50954896559287cd33971e8401332a05c
