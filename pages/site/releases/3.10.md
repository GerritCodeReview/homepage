---
title: "Gerrit 3.10.x"
permalink: 3.10.html
hide_sidebar: true
hide_navtoggle: true
toc: true
---

## Release highlights

### Java 17

The language level used for Gerrit source code stays on Java 11, however, Gerrit
is built and distributed for Java 17, which is the recommended JVM version for
running it in production.

### New and Improved APIs
* [Change 391494](https://gerrit-review.googlesource.com/391494) committer and author identities can be updated in change edit mode via REST
* [Change 390634](https://gerrit-review.googlesource.com/390634) REST API to list indexes and their versions
* [Change 390296](https://gerrit-review.googlesource.com/390296) REST API to create snapshot of Lucene indexes
* [Change 413837](https://gerrit-review.googlesource.com/413837) REST endpoints for getting index info
* [Change 413838](https://gerrit-review.googlesource.com/413838) REST endpoint for reindex an index version
* [Change 409729](https://gerrit-review.googlesource.com/409729) Added REST endpoint to get the commit message of a change

### Less emails
* [Change 400822](https://gerrit-review.googlesource.com/400822) Reduce email spam, by not notifying existing reviewers
      when new ones are added.
* [Change 408557](https://gerrit-review.googlesource.com/408557) Changed attention set logic to add owner and uploader to attention set only when a reply requires the attention of the m
* [Change 409733](https://gerrit-review.googlesource.com/409733) Fix "reviewers by email" receiving more emails than intended
* [Change 408498](https://gerrit-review.googlesource.com/408498) Support conditional attention set updates

### InstanceID aware Gerrit Events
* [Change 398917](https://gerrit-review.googlesource.com/398917) Add instanceId to Gerrit Events
* [Change 399618](https://gerrit-review.googlesource.com/399618) Populate project-created event with instanceId
* [Change 398918](https://gerrit-review.googlesource.com/398918) Ignore project-created events not produced locally

### Rebase merge commits
* [Change 393798](https://gerrit-review.googlesource.com/393798) Added support for rebasing merge commits in rebase submit strategies

### project~changeNumber Is now the recommended change identifier
* [Change 399319](https://gerrit-review.googlesource.com/399319) Support `change:project~changeNumber` query

### Stricter validation when updating copy-conditions
* [Change 409738](https://gerrit-review.googlesource.com/409738) Added validation for label copy conditions

### Configurable H2 cache pruning
* [Change 414349](https://gerrit-review.googlesource.com/414349) Make cache pruning schedule configurable - NOTE, BY DEFAULT IT SEEMS ENABLED

#### More navigable Included In view
* [Change 402597](https://gerrit-review.googlesource.com/402597) Added support for filtering branches/tags in plugins.

### Suggest Fixes improvements
* [Change 403542](https://gerrit-review.googlesource.com/403542) Allow fix-suggestions with human comments
* [Change 402159](https://gerrit-review.googlesource.com/402159) Use user setting for opt out from suggest code while commenting
* [Change 404399](https://gerrit-review.googlesource.com/404399) Add 'suggestFix' method to 'SuggestionProvider' for complex suggestions
* [Change 410158](https://gerrit-review.googlesource.com/410158) Enable "Show Edit" and "Apply Edit" for fix_suggestions within comments
* [Change 412837](https://gerrit-review.googlesource.com/412837) Support multiple suggestions in comment
* [Change 409281](https://gerrit-review.googlesource.com/409281) Allow updating draft comments with fix suggestions
* [Change 408878](https://gerrit-review.googlesource.com/408878) Show fix_suggestions in Comment
### Native log rotation
* [Change 412417](https://gerrit-review.googlesource.com/412417) Add option to regularly delete old logs

### Optional event generation when Reindexing
* [Change 417000](https://gerrit-review.googlesource.com/417000) Allow to reindex changes without notifying listeners

### New Tag sorting options
Allow listing tags in specific order

## Important Notes
* [Change 392460](https://gerrit-review.googlesource.com/392460) Added commit sha and change number to
    "commit already exists (in change)" Push Rejected response.
* [Change 395398](https://gerrit-review.googlesource.com/395398) Fix comment directly link pointing to a change imported from other Gerrit server-ids
* [Change 394841](https://gerrit-review.googlesource.com/394841) The commit-msg hook now operates as a no-op for temporary commits, which are identified by a lowercase word followed by an exclamation mark (e.g., fixup!, squash!). Configure gerrit.createChangeId to 'always' to force creation on these cases.
* [Change 396517](https://gerrit-review.googlesource.com/396517) allow a max_count = 50 for label predicates for SRs.
* [Change 399237](https://gerrit-review.googlesource.com/399237) Improved WorkQueue task thread names
* [Change 412064](https://gerrit-review.googlesource.com/412064) Fixed PostReview to not execute the submit rules twice when the SUBMIT_REQUIREMENTS or SUBMITTABLE options were requested
Log events emitted if sendemail is restricted by config as debug trace
* [Change 404897](https://gerrit-review.googlesource.com/404897) Optionally allow to reuse existing documents during reindexing

## Schema and index changes

The `accounts` index version has been increased to version 14. The `changes` index version has been increased to version 85. The `groups` index version has been increased to version 11. The `projects` index version has been increased to version 9.

NoteDB Schema changes
* [Change 407097](https://gerrit-review.googlesource.com/407097)Protect writing fixSuggestions in HumanComments by flag
* [Change 403542](https://gerrit-review.googlesource.com/403542) Allow fix-suggestions with human comments - Should change anything, just checking

## Online index schema upgrade from 3.9
By default, if you’re upgrading from 3.9, the index is automatically rebuilt upon Gerrit startup after the upgrade.

If you’re upgrading from 3.8 or an earlier version, you must use the Offline upgrade steps below.

## Offline upgrade
- Download the new gerrit.war
- Stop Gerrit
- Ensure all installed plugins are compatible with the new API
- Run init
   `java -jar gerrit.war init -d site_path --batch`
- Reindex
  If you are upgrading from a 3.9 versions you don’t need to run reindex (see Online index schema upgrade from 3.9 above). If you still want to you will need to run reindex:

  `java -jar gerrit.war reindex -d site_path`
  If you are upgrading from a 3.8 or an earlier version, you must run a reindex of all indexes:

  `java -jar gerrit.war reindex -d site_path`
  See the [reindex](https://gerrit-documentation.storage.googleapis.com/Documentation/3.9.0/pgm-reindex.html) command for other options.

## Breaking Changes
* [Change 407417](https://gerrit-review.googlesource.com/407417)
Branch links in change metadata now ignore status
* [Change 404717](https://gerrit-review.googlesource.com/404717)
Deprecate review command without project argument
* [Change 415877](https://gerrit-review.googlesource.com/415877)
Fix issue with gr-file-list-header not working correctly after writing a comment
* [Change 412438](https://gerrit-review.googlesource.com/412438)
Fix behavior of rules.enable config to disable prolog // I think?
* [Change 413537](https://gerrit-review.googlesource.com/413537)
Added new current_revision_number field to ChangeInfo that contains the current patch set number

* [Change 400821](https://gerrit-review.googlesource.com/400821)
* [Change 400821](https://gerrit-review.googlesource.com/400821) AutoMerger#lookupFromGitOrMergeInMemory: Remove mergeStrategy parameter
* [Change 401198](https://gerrit-review.googlesource.com/401198)
* [Change 401198](https://gerrit-review.googlesource.com/401198) DiffOperations: Remove unused diffOptions parameter from load methods
* [Change x](https://gerrit-review.googlesource.com/x)
Deprecated robot-comments
* [Change 402757](https://gerrit-review.googlesource.com/402757)
* [Change 402757](https://gerrit-review.googlesource.com/402757) CommitValidationListener: Add warning to not use DiffOperations
* [Change 411477](https://gerrit-review.googlesource.com/411477)
* [Change 411477](https://gerrit-review.googlesource.com/411477) Address JSON parsing errors on 204 No Content

## Other changes
* [Change x](https://gerrit-review.googlesource.com/x)
* [Change 394446](https://gerrit-review.googlesource.com/394446) fix tabbing for non-emojis starting with colon
* [Change 394795](https://gerrit-review.googlesource.com/394795) Remove ActionType, ChangeActions and RevisionActions enums forwarded as properties from ChangeActionsPluginApi implementation
* [Change 395461](https://gerrit-review.googlesource.com/395461) Fix emoji selector for all keys
* [Change 398500](https://gerrit-review.googlesource.com/398500) Support Bazel user configuration file in gerrit tree
* [Change 393255](https://gerrit-review.googlesource.com/393255) Add support for BuildBuddy RBE provider
* [Change 399797](https://gerrit-review.googlesource.com/399797) Enable highlighting for Qt code components
* [Change 401977](https://gerrit-review.googlesource.com/401977) Use RetryScheduler with backoff when server returns 429
* [Change 401457](https://gerrit-review.googlesource.com/401457) commit message edit can be performed with a secondary email using REST API
* [Change 405980](https://gerrit-review.googlesource.com/405980) Reviewer updates for reviewers by email are returned in change details
* [Change 404738](https://gerrit-review.googlesource.com/404738) Fail review command if multiple changes are selected
* [Change 410145](https://gerrit-review.googlesource.com/410145) Fixed internal server error when posting a review with a ReviewerInput that
* [Change 412617](https://gerrit-review.googlesource.com/412617) Fix bug that allows inserting a broken pack
* [Change 413077](https://gerrit-review.googlesource.com/413077) Plugins can use VersionedConfigFile to read/write a config file stored in git
* [Change 413540](https://gerrit-review.googlesource.com/413540) Added REST endpoints to list and get experiments
* [Change 404739](https://gerrit-review.googlesource.com/404739) Use project in review command
* [Change 394727](https://gerrit-review.googlesource.com/394727) Show correct number of suggestions
* [Change 399657](https://gerrit-review.googlesource.com/399657) Fix WorkQueue bug to ensure reliable execution of scheduled tasks


## Plugin changes
Delete-Project: * [Change 383014](https://gerrit-review.googlesource.com/383014) Plugin Delete-Project archiveDeletedRepos option now also emits a Project Deletion event.

Update plugins/webhooks from branch 'master'
      to d864a2c71e261b39b89ea9425280fad425a336f3 // Updated to 2e5ec3b3bcf5e7ba50edba9eca3c15c8057ad6c2 with I4083ded04a2c5e20a386f9b3fe991c17ace4f3f3
Update plugins/replication from branch 'master'
      to 012f04240eafe6dfa21fd94e012e97498881c621
Update plugins/delete-project from branch 'master'
      to ea78b4b817151f47f6e3aca7bf1e90f14518caa1
Update plugins/download-commands from branch 'master'
      to 978e803c87416eb9e96236446b15b167017c0385
Download-Commands: * [Change 383014](https://gerrit-review.googlesource.com/383014) Added an option to omit SSH usernames from download commands            

## JGit changes
* [Change 401442](https://gerrit-review.googlesource.com/401442) Update jGit to ef53cb8a9
Update jgit to v6.8.0.202311291450-r-91-gc35deb6d8
* [Change 412777](https://gerrit-review.googlesource.com/412777) Update JGit to 74fa245b3
* [Change 415157](https://gerrit-review.googlesource.com/415157) Update JGit to c0b415fb0

## Documentation changes
* [Change 394736](https://gerrit-review.googlesource.com/394736) Reworked the project config documentation page
* [Change 395457](https://gerrit-review.googlesource.com/395457) Improved the submit requirements documentation
* [Change 394739](https://gerrit-review.googlesource.com/394739) config-project-config: Rework the description of the groups file
* [Change 394740](https://gerrit-review.googlesource.com/394740) config-project-config: Add a section about project inheritance
* [Change 394974](https://gerrit-review.googlesource.com/394974) config-project-config: Explain the format of access subsections
* [Change 395437](https://gerrit-review.googlesource.com/395437) config-project-config: Rework section about the project.config file
* [Change 395618](https://gerrit-review.googlesource.com/395618) Further improve the submit requirements documentation page
* [Change 395619](https://gerrit-review.googlesource.com/395619) config-submit-requirements.txt: Rework the decription of the label operator
* [Change 395678](https://gerrit-review.googlesource.com/395678) config-submit-requirements.txt: Mention that 500 ISE may be returned for errors
* [Change 395697](https://gerrit-review.googlesource.com/395697) config-submit-requirements.txt: Explain config for dashboards
* [Change 395679](https://gerrit-review.googlesource.com/395679) config-submit-requirements.txt: Include more details on testing SRs
* [Change 395681](https://gerrit-review.googlesource.com/395681) Update instructions about filing security issues
* [Change 395721](https://gerrit-review.googlesource.com/395721) config-submit-requirements.txt: Explain relation between labels and SRs
* [Change 395997](https://gerrit-review.googlesource.com/395997) Update documentation for the ChangeInfo.
* [Change 396677](https://gerrit-review.googlesource.com/396677) intro-user.txt: Update Tools sections
* [Change 398418](https://gerrit-review.googlesource.com/398418) Document Byte Buddy issue with running mock tests
* [Change 399637](https://gerrit-review.googlesource.com/399637) Suggest Reviewers: Document when accounts are visible
* [Change 399697](https://gerrit-review.googlesource.com/399697) submit-requirements.txt: Document how to restore SRs via REST
* [Change 399703](https://gerrit-review.googlesource.com/399703) Document how to make an account visible to all users when VISIBLE_GROUP is used
* [Change 400398](https://gerrit-review.googlesource.com/400398) SR documentation: Mention that label function should be set to NoBlock
* [Change 400597](https://gerrit-review.googlesource.com/400597) Improve documentation of the `Owner` access right
* [Change 403718](https://gerrit-review.googlesource.com/403718) Project owner guide: Update references to the projects menu
* [Change 403939](https://gerrit-review.googlesource.com/403939) Project owner guide: Update references to the groups menu
* [Change 404058](https://gerrit-review.googlesource.com/404058) Document that the Access screen allows to change the parent project
* [Change 404678](https://gerrit-review.googlesource.com/404678) config-project-config.txt: List more REST endpoints to update the config
* [Change 410725](https://gerrit-review.googlesource.com/410725) Document behaviour of RetryScheduler

## Other dependency changes

* [Change 389854](https://gerrit-review.googlesource.com/389854) Update protobuf version to 21.7
* [Change 408697](https://gerrit-review.googlesource.com/408697) update Soy library
* [Change 387360](https://gerrit-review.googlesource.com/387360) Update Bazel version to 7.0.0
* [Change 391534](https://gerrit-review.googlesource.com/391534) Bazel: Add support for JDK 21
* [Change 399333](https://gerrit-review.googlesource.com/399333) Update protobuf version to 25.1
* [Change 401385](https://gerrit-review.googlesource.com/401385) Update gitiles to 1.4.0
* [Change 402759](https://gerrit-review.googlesource.com/402759) Update commons-compress to 1.25.0
* [Change 399557](https://gerrit-review.googlesource.com/399557) Update ch.qos.reload4j:reload4j to 1.2.25
* [Change 388224](https://gerrit-review.googlesource.com/388224) Update org.apache.httpcomponents:httpcore to 4.4.16
* [Change 388221](https://gerrit-review.googlesource.com/388221) Update com.google.auto.value:auto-value to 1.10.4
* [Change 388223](https://gerrit-review.googlesource.com/388223) Update org.apache.httpcomponents:httpclient to 4.5.14
* [Change 392681](https://gerrit-review.googlesource.com/392681) Bazel: Update RBE docker image to Ubuntu 22.04 and JDK 17
* [Change 400697](https://gerrit-review.googlesource.com/400697) Upgrade yarn deps (January 2024)
* [Change 405717](https://gerrit-review.googlesource.com/405717) Update Truth to 1.3.0 (and its dep Guava to 33.0.0).
* [Change 406597](https://gerrit-review.googlesource.com/406597) Update Truth to 1.4.0.
* [Change 412497](https://gerrit-review.googlesource.com/412497) Update Truth to 1.4.2.

## Frontend changes
* [Change 397979](https://gerrit-review.googlesource.com/397979) account-chip hover-card shows correct email for author and committer
* [Change 397457](https://gerrit-review.googlesource.com/397457) Add syntax highlight support for cjs, cts, and mts file
* [Change 397857](https://gerrit-review.googlesource.com/397857) change edit UI supports updating author and committer identities
* [Change 400824](https://gerrit-review.googlesource.com/400824) Fix scrolling to diff rows covered by the header UI
* [Change 402837](https://gerrit-review.googlesource.com/402837) Revert CLs should still say Ready To Submit
* [Change 403437](https://gerrit-review.googlesource.com/403437) UI supports updating commit message using a registered secondary email
* [Change 407157](https://gerrit-review.googlesource.com/407157) Add plugin endpoint for account links
* [Change 407660](https://gerrit-review.googlesource.com/407660) Turn Reply button into Sign in button when logged out
* [Change 407820](https://gerrit-review.googlesource.com/407820) Improve reviewer autocomplete on restricted refs/branches
* [Change 407823](https://gerrit-review.googlesource.com/407823) Show checks findings on file list
* [Change 407825](https://gerrit-review.googlesource.com/407825) Prevent pencil wrapping by itself in change metadata
* [Change 408157](https://gerrit-review.googlesource.com/408157) Added support to update the reason why a user is in the attention set
* [Change 413237](https://gerrit-review.googlesource.com/413237) Fix browser BACK button when going to plugin pages
* [Change 413257](https://gerrit-review.googlesource.com/413257) Allow listing tags in descending order
* [Change 415877](https://gerrit-review.googlesource.com/415877) Fix issue with gr-file-list-header not working correctly after writing a comment
* [Change 416117](https://gerrit-review.googlesource.com/416117) gr-change-view: use change-model to update change object
* [Change 416260](https://gerrit-review.googlesource.com/416260) Diff processor was simplified. It does not split up into multiple async chunks of work anymore.
* [Change 396859](https://gerrit-review.googlesource.com/396859) Disable dropdown items for downlading files >50 MB
* [Change 401384](https://gerrit-review.googlesource.com/401384) Stop considering combo key after first hit
* [Change 403277](https://gerrit-review.googlesource.com/403277) Only show the "Show Blame" button if blame is enabled.
* [Change 416001](https://gerrit-review.googlesource.com/416001) Add a `replysent` plugin event
* [Change 411358](https://gerrit-review.googlesource.com/411358) Fix revision actions constantly showing as "loading" when not signed in
