---
title: "Gerrit 3.7.0"
permalink: 3.7.html
hide_sidebar: true
hide_navtoggle: true
toc: true
---

Download: **[3.7.0-rc3](https://gerrit-releases.storage.googleapis.com/gerrit-3.7.0-rc3.war)**

Documentation: **[3.7.0-rc3](https://gerrit-documentation.storage.googleapis.com/Documentation/3.7.0/index.html)**

## Release highlights

### UI mostly migrated to [Lit](https://lit.dev/)

Gerrit UI is mostly migrated to Lit, with a
[few exceptions for certain modules](https://github.com/GerritCodeReview/gerrit/search?q=polymer).

### Mention support

Users can be mentioned in comments using the `@<user>` notation and select the matching
accounts. Mentioning users automatically add them in CC and send e-mail notification to
get their attention.

### Full markdown support

Comments and checks accepts and render the full markdown syntax, allowing richer interaction
and communication between authors and reviewers.

### Import of Projects and Changes from other Gerrit servers

Gerrit can read and render Changes coming from Projects copied from other servers having
different server-ids and account-ids.

### New command to check project access for other users

Gerrit admins can verify the ACLs of projects for individual users using the new
`gerrit check-project-access` SSH command.

## Important notes

### Schema and index changes

This release contain changes to the schema which is upgraded to version 185.

### Offline upgrade

Download the gerrit.war and run the `init` program:

```sh
  java -jar gerrit.war init -d site_path
```

### Online upgrade with zero-downtime

Gerrit v3.7.x supports zero-downtime upgrade from Gerrit v3.6.2 or later when
configured using a [high-availability configuration](https://gerrit.googlesource.com/plugins/high-availability/+/refs/heads/master/README.md),
and the Git repositories are stored in a shared filesystem such as NFS or
similar.

During the zero-downtime upgrade, Gerrit end-users would not notice any outage
or service disruption. They will be able to perform any read/write Gerrit
operation on the GUI or using using any API.

The zero-downtime upgrade consists of the following steps:

1. Have Gerrit servers running v3.6.2 or later, in high-availability
   configuration, healthy and able to handle the incoming traffic properly.
2. Set `gerrit.experimentalRollingUpgrade` to `true` in `gerrit.config` on both Gerrit masters.
3. Set the Gerrit server unhealthy.
4. Shutdown the Gerrit server, update gerrit.war and plugins to v3.7.x and start
   Gerrit again.
5. Verify that the Gerrit server is working properly (e.g. run automated smoke
   tests) and then make it healthy again.
6. Wait for the Gerrit server to start serving traffic normally.
7. Repeat steps 3. to 6. for all the other Gerrit servers.
8. Remove `gerrit.experimentalRollingUpgrade` from `gerrit.config` on both Gerrit masters.

### Breaking changes

* [Change 343774](https://gerrit-review.googlesource.com/343774):
Delete ignored state of changes and 'star:' queries

  The query predicates `star:ignored`, `is:ignored` and `star:star` are not supported
  anymore. The latter is identical to 'is:starred' or 'has:star'.

* [Change 334467](https://gerrit-review.googlesource.com/334467):
Removed support for deprecated approval config fields in label configs

  The boolean flags in label configurations to control approval copying,
  as well as the copyValue settings, was previously deprecated and now completely
  removed in favor of the new copyCondition setting that allows to express the
  copy conditions as a query.

* [Change 337456](https://gerrit-review.googlesource.com/337456):
Ban new modifications to label functions in favour of submit requirements

* [Issue 15784](https://crbug.com/gerrit/15784):
New project `head updated` event in the stream events

* [Issue 11686](https://crbug.com/gerrit/11686):
Discontinue support for legacy numeric types in Lucene

  In Lucene the implementation switched from integer id to string id and now
  all the old code is removed. Three different index implementations
  are affected:

  * changes
  * account
  * groups

* [Change 334325](https://gerrit-review.googlesource.com/334325):
   Release-Notes: Migrated label definitions to use copy conditions instead of deprecated fields

  The boolean flags in label configurations to control approval copying,
  as well as the copyValue settings, have been deprecated in favor of the
  new copyCondition setting that allows to express the copy conditions as
  a query. The newly added schema version migrates the deprecated fields to copy
  conditions.

  **NOTE**: Because of this breaking change, downgrading to Gerrit v3.6.x is
  not possible out of the box.

* [Change 336297](https://gerrit-review.googlesource.com/336297):
Recognize lower case operators in search

  Previously, we only recognized AND, OR and NOT as boolean
  operators. This seems overly strict as users might
  unintentionally use the lower case variants.

### Other changes

* [Change 346979](https://gerrit-review.googlesource.com/346979):
Add ability to specify prefix, suffix and text fields for commentLinks of type `link`

* [Change 346854](https://gerrit-review.googlesource.com/346854):
Update change.maxPatchSets value from 1500 to 1000

* [Change 345229](https://gerrit-review.googlesource.com/345229):
Support bulk actions on dashboard and search pages

* [Change 337434](https://gerrit-review.googlesource.com/337434):
New REST API for previewing fix from the request body to a patch set

  The newly added API `fix:preview` previewes fix(es) provided as part
  of a POST request body. `ApplyProvidedFixInput` holds the fix(es).
  This flow is suitable when a frontend plugin shows fix(es) that it is
  suggesting on the UI and that the user can accept. 

* [Change ](https://gerrit-review.googlesource.com/):
Allow testing submit requirements using a pending change to the refs/meta/config branch

  Admins can then test their SRs using the following workflow:
  1. Upload a pending change to the refs/meta/config branch.
  2. Test it immediately on any change using:
     `curl -X POST  https://<gerrit-url>/changes/<change_to_test>/check.submit_requirement?sr-name=Foo&refs-config-change-id=$id`

* [Change 336715](https://gerrit-review.googlesource.com/336715):
Disallow index updates that both add and remove fields

  A new version may only add or remove fields, but not both. The type of
  existing fields may not be changed.

* [Change 307349](https://gerrit-review.googlesource.com/307349):
Add change REST endpoints to create and retrieve submit requirements.

* [Change 307352](https://gerrit-review.googlesource.com/307352):
Add a REST endpoint to delete submit requirements

* [Change 307351](https://gerrit-review.googlesource.com/307351):
Add a REST endpoint to list submit requirements in a project.

* [Change ](https://gerrit-review.googlesource.com/):
New REST API for applying a fix from the request body to a patch set

* [Change 339555](https://gerrit-review.googlesource.com/339555):
The commit-msg hook ignores fixup and squash commits now.

  Fixup and squash commits will inherit the Change-id of the commit they
  are squashed into.

* [Issue 12546](https://crbug.com/gerrit/12546):
In commit-msg hook, the Change-Id is now inserted before any Signed-off-by

* [Change 338680](https://gerrit-review.googlesource.com/338680):
Included copied/outdated votes in change message on patch set creation

  Include copied and outdated approvals into the change message that is
  posted on patch set creation. This allows users to find the copied/outdated
  approvals for each patch set in the change log.

* [Change 337968](https://gerrit-review.googlesource.com/337968):
Copy approvals that are applied on outdated patch sets to follow-up patch sets if copyable

  Copying approvals that are applied on outdated patch sets to follow-up
  patch sets make the life easier for CIs, e.g.:

  1. CI is triggered on PS X
  2. While the CI is running, PS X+1 which only modified the commit
     message is uploaded
  3. CI finishes on votes Verified+1 on the outdated PS X

* [Change 336712](https://gerrit-review.googlesource.com/336712):
Included outdated approvals in push output when pushing a new patch set

* [Change 336414](https://gerrit-review.googlesource.com/336414):
Included unsatisfied SRs into new patch set email when change becomes unsubmittable

  When a change becomes unsubmittable users want to know which submit
  requirements are no longer satisfied.

* [Change ](https://gerrit-review.googlesource.com/):
Support deletion of missing changes from the index

  If a change is not found, and the "delete_missing" option is set to
  "true", then try to delete it from the index.

* [Change 336134](https://gerrit-review.googlesource.com/336134):
gerrit.sh: add --debug option, start JVM in debug mode

* [Change 335754](https://gerrit-review.googlesource.com/335754):
Approver is added to the attention set when their approval is not copied

  If a user applied an approval on a change and this approval gets
  outdated and removed when a new patch set is uploaded (i.e. the approval
  is not copied to the new patch set) then this user is added to the
  attention set now. This is to signal that this user should re-review the
  change and renew their approval.

* [Change 330407](https://gerrit-review.googlesource.com/330407):
Added the value "NOT_EVALUATED" to the SubmitRequirementExpressionInfo in the Change API and in NoteDb.

## Plugin changes

## Gerrit UI changes

* [Change 346077](https://gerrit-review.googlesource.com/346077):
Added "Your > All Visible Changes" default query

  Add a new entry to the "Your" menu which queries "is:visible" which,
  is the query for viewing all changes.

* [Change 345136](https://gerrit-review.googlesource.com/345136):
Remove redundant/unhelpful ARIA labels from diff tables

* [Change 344914](https://gerrit-review.googlesource.com/344914):
Fix freezing in Safari when adding comments

* [Change ](https://gerrit-review.googlesource.com/):
New user setting for theme. New default - Auto - shows dark or light theme
based on OS theme preference. User can change new default in settings

  Switching theme is now reactive - listening to OS theme preference
  changes or on user changing user preferences.

* [Change 337421](https://gerrit-review.googlesource.com/337421):
Introduce Auto Dark/Light Theme based on OS preference

  Introducing a new default mode - Auto. This will dynamically change
  theme based on OS preferences. Mac OS has Auto mode, that switch
  to dark mode in evening. With this change Gerrit can have dark theme
  in evening and light them during day.

* [Change 343605](https://gerrit-review.googlesource.com/343605):
Make the file list easier to understand at a glance

  Folders that match the previous file are colored gray, folders that
  do not match are black, and the file name it self is blue.

* [Change 340970](https://gerrit-review.googlesource.com/340970):
Start using material icons

## Documentation changes

* [Change 337097](https://gerrit-review.googlesource.com/337097):
Contribution Documentation updated for grammar

  A few updates to the contribution documentation for developers:
  - Minor grammatical errors and restructuring sentences.
  - Removing a duplicated paragraph regarding incomplete features.
  - Changes in verb tense ('has' to 'is' where appropriate)

## End-to-End tests changes

* [Change 335394](https://gerrit-review.googlesource.com/335394):
Added property authenticated to e2e-tests

  This property let you use authenticated HTTP clones with the e2e-tests.

## JGit changes

* Update jgit to 2021ce342.

## Other dependency changes

* Update Lucene version to 7.7.3

## Other core changes

## Bugfix releases

### No release candidate

* Breaking changes

* Performance Fixes

* Bug Fixes

* Dependency Updates

* Documentation Fixes

---
