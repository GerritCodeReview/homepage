---
title: "Gerrit 3.14.0"
permalink: 3.14.html
hide_sidebar: true
hide_navtoggle: true
toc: true
---

Download: **[3.14.0](https://gerrit-releases.storage.googleapis.com/gerrit-3.14.0.war)**

Documentation: **[3.14.0](https://gerrit-documentation.storage.googleapis.com/Documentation/3.14.0/index.html)**

## Release highlights

### Introducing the Review Agent

The AI-assisted code review, formerly known as "AI Chat", has been promoted
to a new identity as the "Review Agent" and is enabled by default.

The Review Agent helps to understand, summarize and review a change, through a
convenient chat-like interface in the change screen.

### WebUI Modernization

The WebUI has been improved by removing all the legacy Polymer dependencies
on `paper-` and `iron-` components. The overall user experience is now more
consistent with the new Material Design 3 guidelines.

### Asynchronous change indexing for users

Change indexing for regular users is now asynchronous by default. This means
that the user actions that trigger a reindexing, such as pushing a change or
posting a review, will now return immediately without waiting for the indexing
to complete.

This should improve the user experience, especially on busy servers, as users
will not have to wait for the indexing to complete before they can continue
with their work.

### New `reviewercount` search operator

A new `reviewercount` search operator has been added to the change index,
allowing to search for changes based on the number of reviewers.

Example: `reviewercount:0` will return all changes with no reviewers.

## Important Notes

### Schema and index changes

Gerrit schema version is unchanged.

A full reindex is recommended to populate the new `reviewercount` field in the
change index.

### Offline upgrade

- Stop Gerrit
- Download the new `gerrit.war` and move it to `$GERRIT_SITE/bin`
- Extract all the plugins from `gerrit.war` and move the ones needed into `$GERRIT_SITE/plugins`
- Run the full reindex:
  `java -jar $GERRIT_SITE/bin/gerrit.war reindex -d $GERRIT_SITE`
- Start Gerrit

### Online upgrade with zero-downtime

Gerrit v3.14.x supports zero-downtime upgrade from Gerrit v3.13 when configured
using
[high-availability](https://gerrit.googlesource.com/plugins/high-availability/+/refs/heads/master/README.md)
setup.

During the zero-downtime upgrade, Gerrit end-users will not experience any
outage or service disruption and will be able to perform any read/write Gerrit
operation seamlessly.

The zero-downtime upgrade process for high-availability setups
consists of the following steps ([demo](https://youtu.be/vK5qsb0W7q4)):

1. Have Gerrit servers running v3.13 in high-availability
   configuration, healthy and able to handle the incoming traffic properly.
2. Set one of the Gerrit servers to unhealthy.
3. Shutdown the Gerrit server, update gerrit.war, plugins and libs to v3.14.x and start Gerrit again.
4. Run the full reindex on the upgraded server:
   `java -jar $GERRIT_SITE/bin/gerrit.war reindex -d $GERRIT_SITE`
5. Verify that the Gerrit server is working properly (e.g. run automated smoke
   tests) and then make it healthy again.
6. Ensure the Gerrit server is fully caught up with the events that happened while
   it was down before directing traffic to it.
7. Repeat steps 2 to 6 for each of the remaining Gerrit servers.


## New Features

* [Change 481026](https://gerrit-review.googlesource.com/c/gerrit/+/481026):
  Add a REST API for flows.

* [Change d61d96eb92](https://gerrit-review.googlesource.com/c/gerrit/+/d61d96eb92):
  Add REST endpoint to flush and commit index modifications.

* [Change da34f08714](https://gerrit-review.googlesource.com/c/gerrit/+/da34f08714):
  Add a new `addChangeReviewFootersToCommitMessage` configuration flag to
  include the `Reviewed-on` and `Reviewed-by` footers in the commit message
  when a change is submitted.

* [Change 21f35ba51c](https://gerrit-review.googlesource.com/c/gerrit/+/21f35ba51c),
  [Change 639392ce7b](https://gerrit-review.googlesource.com/c/gerrit/+/639392ce7b):
  Add `beforeCommitMessage` and `BEFORE_PUBLISH_EDIT` plugin events.

* [Change 722e6454ed](https://gerrit-review.googlesource.com/c/gerrit/+/722e6454ed):
  Allow to add SameSite attribute to cookies.

* [Change 079fa6e1fd](https://gerrit-review.googlesource.com/c/gerrit/+/079fa6e1fd):
  Add a REST endpoint to get a revision.

* [Change d8e0dfcf40](https://gerrit-review.googlesource.com/c/gerrit/+/d8e0dfcf40):
  Add REST API for migrating label functions to submit requirements.

* [Change f994d4a681](https://gerrit-review.googlesource.com/c/gerrit/+/f994d4a681):
  Add the Review Agent (formerly AI Chat) to the change screen.

* [Change 14fed53f97](https://gerrit-review.googlesource.com/c/gerrit/+/14fed53f97):
  Add `reviewercount` search operator to the changes index.

## Performance improvements

* [Change 2f094aae27](https://gerrit-review.googlesource.com/c/gerrit/+/2f094aae27):
  Allow caches to register non-primitive key types, improving cache
  performance.

* [Change cddf2159ca](https://gerrit-review.googlesource.com/c/gerrit/+/cddf2159ca):
  Do change indexing asynchronously if the caller is not a service user.

* [Change c9f79fbbe3](https://gerrit-review.googlesource.com/c/gerrit/+/c9f79fbbe3),
  [Change fdd0d3eeca](https://gerrit-review.googlesource.com/c/gerrit/+/fdd0d3eeca),
  [Change 491bf04c29](https://gerrit-review.googlesource.com/c/gerrit/+/491bf04c29):
  Add more `TraceTimer`s to record the latency for various operations.

* [Change 3aac0404c2](https://gerrit-review.googlesource.com/c/gerrit/+/3aac0404c2):
  Skip diff stats when retrieving submit requirements, for performance reasons.

## Bug fixes

* [Issue 440670261](https://issues.gerritcodereview.com/issues/440670261)
  [Change 63f323ca58](https://gerrit-review.googlesource.com/c/gerrit/+/63f323ca58):
  Return `submittable: false` for MERGED and ABANDONED changes.

* [Change 0a4a1bb5e6](https://gerrit-review.googlesource.com/c/gerrit/+/0a4a1bb5e6):
  Fix NullPointerException in `DiffUtil.mergeRewrittenModifiedFiles`.

* [Change f151636c40](https://gerrit-review.googlesource.com/c/gerrit/+/f151636c40):
  Fix deleting rule in `gr-rule-editor`.

## Frontend changes

* [Change 3255b2e8e7](https://gerrit-review.googlesource.com/c/gerrit/+/3255b2e8e7):
  Remove dependencies on `paper-` and `iron-` components completely.

* [Change f93daf45bc](https://gerrit-review.googlesource.com/c/gerrit/+/f93daf45bc):
  Remove AttributeHelper Plugin API.

* [Change 907c6a1172](https://gerrit-review.googlesource.com/c/gerrit/+/907c6a1172):
  Remove `gr-css-mixins`.

* [Change cd0e9b96fb](https://gerrit-review.googlesource.com/c/gerrit/+/cd0e9b96fb),
  [Change e8decd2123](https://gerrit-review.googlesource.com/c/gerrit/+/e8decd2123):
  Fix UI issues where long subject lines could extend beyond the visible screen
  area.

* [Change f3086995de](https://gerrit-review.googlesource.com/c/gerrit/+/f3086995de):
  Set header height using `ResizeObserver`s for more responsive layout.

* [Change a10fa5f28c](https://gerrit-review.googlesource.com/c/gerrit/+/a10fa5f28c):
  Rename AI Chat to Review Agent in the UI.

* [Change c785f45592](https://gerrit-review.googlesource.com/c/gerrit/+/c785f45592):
  Fix context item handling in splash page actions.

* [Change 117802e9b4](https://gerrit-review.googlesource.com/c/gerrit/+/117802e9b4):
  Fix issue with sidebar not closing when clicking on account dropdown on mobile.

## Documentation changes

* [Change 685c01672b](https://gerrit-review.googlesource.com/c/gerrit/+/685c01672b):
  Document that at Google querying changes uses stale reads for non-service
  users.

* [Change a5c3dc9e92](https://gerrit-review.googlesource.com/c/gerrit/+/a5c3dc9e92):
  Document necessity of using `http.saveCookies`.

* [Change 07671bbd13](https://gerrit-review.googlesource.com/c/gerrit/+/07671bbd13):
  Update labels documentation.

## Community

### Welcome to our new contributors

Welcome to the new contributors that had their first patch merged in 3.14.0:

 * Jussi Karhu
 * Kenyon Ralph
 * Manuel Stahl
 * Marco Soeima
 * Piotr Szlazak
 * Robert DAZI
 * Wyatt Hepler

Thank you for your contributions!
