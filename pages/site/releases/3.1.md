---
title: "Gerrit 3.1.0 Release (release candidate)"
permalink: 3.1.html
hide_sidebar: true
hide_navtoggle: true
toc: true
---

## Release Highlights

* Mandatory plugins

  It is possible to configure which plugins are mandatory.

  Gerrit will fail to start if a mandatory plugin cannot be loaded.

  Disabling and restarting of a mandatory plugin is rejected.

  Reloading of a mandatory plugin is still possible.

## Important Notes

### Schema Changes

This release contains schema changes. To upgrade:

``` sh
  java -jar gerrit.war init -d site_path
```

### Breaking Changes

#### The `reviewdb.client` package is renamed to `entities`

Plugins or extensions that import classes from the `com.google.gerrit.reviewdb.client`
package must change the imports to `com.google.gerrit.entities`.

#### Changed APIs for `Id` and `NameKey` classes

Plugins and extensions that instantiate and use classes such as `Account.Id`,
`Change.Id`, `Project.NameKey`, `Branch.NameKey`, etc, must adapt to the following
changes.

* The classes can no longer be instantiated with the `new` operator. Instead they
must be created with static factory methods.

  * `new Account.Id(...)` --> `Account.id(...)`
  * `new AccountGroup.Id(...)` --> `AccountGroup.id(...)`
  * `new AccountGroup.UUID(...)` --> `AccountGroup.uuid(...)`
  * `new Branch.NameKey(...)` --> `BranchNameKey.create(...)`
  * `new Project.NameKey(...)` --> `Project.nameKey(...)`

* 'Getter' methods are now generated by the auto-value library and no longer have
the `get` prefix.

  * `Account.getName()` -> `Account.name()`
  * ...etc

#### REST API endpoint implementations must return `Response<T>`

REST API endpoint implementations must now return a `Response` object that
explicitly sets a status code. Plugins that currently only return an `Object`
must be adapted to the new interface.

#### Powermock and Easymock are removed

The Powermock and Easymock libraries are no longer exported in the `acceptance-framework`
artifact, and are replaced by Mockito. Plugins that use Powermock and/or Easymock in their
tests should either add explicit dependencies, or migrate the tests to Mockito.

## New Features

### Replication plugin

* [Issue 11196](https://bugs.chromium.org/p/gerrit/issues/detail?id=11196):
Latency metric is now recorded also at a project level, only when
the latency was greater than a configured threshold, configurable in
`replication.config`

## Dependency Updates
