---
title: "Gerrit 3.3.0 Release (in development)"
permalink: 3.3.html
hide_sidebar: true
hide_navtoggle: true
toc: true
---

Download: **[3.3.0-rc0](https://gerrit-releases.storage.googleapis.com/gerrit-3.3.0-rc0.war)**

Documentation: **[3.3.0-rc0](https://gerrit-documentation.storage.googleapis.com/Documentation/3.3.0/index.html)**

## Release Highlights

## Important Notes

### Default Support for Java 11

### Schema Changes

This release contains schema changes. To upgrade:

``` sh
  java -jar gerrit.war init -d site_path
```

Upgrading to this schema version (184) renames the `Non-Interactive Users`
group to `Service Users`.

### Native Packaging

### Breaking Changes

* [New logs timestamp format](http://gerrit-documentation.storage.googleapis.com/Documentation/3.3.0/logs.html):

  The new format supports both ISO-8601 and RFC3339, which means that if you are
  parsing it as general ISO-8601 it should work as before. However you will be
  affected if you are parsing the timestamp with a static format.

## New Features

* [Attention Set](http://gerrit-documentation.storage.googleapis.com/Documentation/3.3.0/user-attention-set.html):

  For every change Gerrit maintains an "Attention Set" with users that are
  currently expected to act on the change. Both on the dashboard and on the
  change page, this is expressed by an arrow icon before the user name.

  Disabled by default, enable by setting [change.enableAttentionSet](http://gerrit-documentation.storage.googleapis.com/Documentation/3.3.0/config-gerrit.html#change.enableAttentionSet).

  Feature fixes since inception:

  * [Issue 13183](https://bugs.chromium.org/p/gerrit/issues/detail?id=13183):
    Fix adding users to attention set for merged/abandoned changes.

  * [Issue 13214](https://bugs.chromium.org/p/gerrit/issues/detail?id=13214):
    Ensure owner and uploader are not added to attention set as reviewers.

  * [Issue 13225](https://bugs.chromium.org/p/gerrit/issues/detail?id=13225):
    Ensure reviewers are not added to the attention set when voting.

  * [Issue 13251](https://bugs.chromium.org/p/gerrit/issues/detail?id=13251):
    Fix adding users to attention set for merged/abandoned changes.

  * [Issue 13351](https://bugs.chromium.org/p/gerrit/issues/detail?id=13351):
    Disable the attention icon button in the reply dialog "Modify" section.

## Bug Fixes

* Core Fixes

  * [Issue 8164](https://bugs.chromium.org/p/gerrit/issues/detail?id=8164) and
    [Issue 11774](https://bugs.chromium.org/p/gerrit/issues/detail?id=11774):
    Change filtering of messages in experimental ChangeLog.

  * [Issue 11493](https://bugs.chromium.org/p/gerrit/issues/detail?id=11493) and
    [Issue 12364](https://bugs.chromium.org/p/gerrit/issues/detail?id=12364):
    Diff view: Pass line number to inline editor.

  * [Issue 11637](https://bugs.chromium.org/p/gerrit/issues/detail?id=11637):
    Add a process to remove a core plugin.

  * [Issue 12704](https://bugs.chromium.org/p/gerrit/issues/detail?id=12704):
    Simplify Init for Elasticsearch.

  * [Issue 12778](https://bugs.chromium.org/p/gerrit/issues/detail?id=12778):
    Fix searching in "included in".

  * [Issue 13014](https://bugs.chromium.org/p/gerrit/issues/detail?id=13014):
    Clean up disrespectful terms.

  * [Issue 13184](https://bugs.chromium.org/p/gerrit/issues/detail?id=13184):
    Respect `log.textLogging` and `log.jsonLogging` using `--console-log`.

  * [Issue 13303](https://bugs.chromium.org/p/gerrit/issues/detail?id=13303):
    Add `.cml` extension to be interpreted as json.

  * [Issue 13307](https://bugs.chromium.org/p/gerrit/issues/detail?id=13307):
    Preserve instanceId on event when already set.

  * [Issue 13349](https://bugs.chromium.org/p/gerrit/issues/detail?id=13349):
    When SSH is disabled, it should also be disabled on replica.

  * [Issue 13350](https://bugs.chromium.org/p/gerrit/issues/detail?id=13350):
    Decode group id before using it to add [cc-]reviewers.

  * [Issue 13357](https://bugs.chromium.org/p/gerrit/issues/detail?id=13357):
    Add the work_in_progress option to the revert and revertSubmission endpoints.

  * [Issue 13394](https://bugs.chromium.org/p/gerrit/issues/detail?id=13394):
    Add guards to regular change update polling.

  * [Issue 13408](https://bugs.chromium.org/p/gerrit/issues/detail?id=13408):
    Fix possible NPE when auto-closing changes.

* UI Fixes

  * [Issue 12551](https://bugs.chromium.org/p/gerrit/issues/detail?id=12551):
    Fix textarea styling for firefox.

  * [Issue 12707](https://bugs.chromium.org/p/gerrit/issues/detail?id=12707):
    Apply diff preferences immediately after clicking save.

  * [Issue 12775](https://bugs.chromium.org/p/gerrit/issues/detail?id=12775):
    Fix `parent` in `gr-change-metadata` when switching patchsets.

  * [Issue 12880](https://bugs.chromium.org/p/gerrit/issues/detail?id=12880):
    Pass change to `gr-message`.

  * [Issue 12934](https://bugs.chromium.org/p/gerrit/issues/detail?id=12934):
    Fix selection on diff with range comments.

  * [Issue 12994](https://bugs.chromium.org/p/gerrit/issues/detail?id=12994):
    Fix toggle on iOS.

  * [Issue 12997](https://bugs.chromium.org/p/gerrit/issues/detail?id=12997):
    Fix link for patchset level comment.

  * [Issue 13054](https://bugs.chromium.org/p/gerrit/issues/detail?id=13054):
    Restore keyboard shortcut for expand all diff context.

  * [Issue 13073](https://bugs.chromium.org/p/gerrit/issues/detail?id=13073):
    Fix highlight on multi-line range comments.

  * [Issue 13080](https://bugs.chromium.org/p/gerrit/issues/detail?id=13080):
    Fix the position of the hovercard.

  * [Issue 13175](https://bugs.chromium.org/p/gerrit/issues/detail?id=13175):
    Fix `gr-hovercard-behavior` under Firefox.

  * [Issue 13189](https://bugs.chromium.org/p/gerrit/issues/detail?id=13189):
    Fix overflow of `gr-account-label`.

  * [Issue 13266](https://bugs.chromium.org/p/gerrit/issues/detail?id=13266):
    Allow to use 'Apply fix' several times on the commit message.

  * [Issue 13328](https://bugs.chromium.org/p/gerrit/issues/detail?id=13328):
    Redirect GWT links to project dashboard to Polygerit.

  * [Issue 13376](https://bugs.chromium.org/p/gerrit/issues/detail?id=13376):
    Make sure that comment drafts are sorted to the end.

  * [Issue 13433](https://bugs.chromium.org/p/gerrit/issues/detail?id=13433):
    Unlock scroll if hovercard detached.

## Core Plugin Improvements

### Codemirror-editor Plugin

* Move codemirror editor plugin to Polymer 3.
* Remove support for Polymer 1.

### Delete-project Plugin

* [Issue 12535](https://bugs.chromium.org/p/gerrit/issues/detail?id=12535):
  Migrate delete-project plugin to polymer 3.

* [Issue 12705](https://bugs.chromium.org/p/gerrit/issues/detail?id=12705):
  Fix plugin loading under IE 11.

### Download-commands Plugin

* New command: "Reset To".

  Add a new command that allows to reset the current branch to the commit
  that was fetched. This is useful in cases when the user is working on a
  local branch and the existing commands are not appropriate:

  * "Checkout" will check out the FETCH_HEAD, i.e. moving off the current
    branch and leaving the local repository in 'detached head' state.

  * "Cherry-Pick" will commit the fetched change again, resulting in a
    'new' commit (i.e. changed sha1) which will result in a new patch set
    if the user creates any commits on top of it and pushes for review.

### Replication Plugin

* Prevent persistent task listing interruptions on IOExceptions.

  Improved the logging by differentiating between failures that are
  severe versus potentially related to other node actions since in a
  multi-master scenario with shared storage, it is common for operations
  on one node to "interfere" with task listing operations on another node
  without causing a malfunction. Specifically, improve the exception
  handling so that the logging in these latter cases have a likely
  explanation of the listing error, and do not consider these specific
  filesystem errors operational errors.
  
  **NOTE**: The multi-master replication is still experimental.

* Add method to push changes directly to given replica.

  This makes it possible to push changes directly to given replica
  instance without sending unnecessary requests to others.

  The method is intended to be used by other plugins that extend the
  replication plugin.

* Fix synopsis in replication start command documentation.

  `--url` is usable with `--all` or projects and on its own.
  Updated the usage to reflect this.

* [Issue 11745](https://bugs.chromium.org/p/gerrit/issues/detail?id=11745):
  Fix firing pending "..all.." events on startup.

* [Issue 12073](https://bugs.chromium.org/p/gerrit/issues/detail?id=12073):
  Do not remove replication tasks if they are retrying.

  Prevent the premature removal of replication tasks when they are
  scheduled for retry.

  Don't reset storage when rescheduling for collisions.
  This avoids extra bogus FileNotFound log messages.

* [Issue 12592](https://bugs.chromium.org/p/gerrit/issues/detail?id=12592):
  Do not block ref-updates during the configuration reload.

  For setups with a large number of remote configurations, configuration
  reload can be a time consuming operation. During the reload, the list of
  all destinations is blocked by a synchronized and thus any ref-update
  in Gerrit is blocked and cause a general outage until the replication
  plugin configuration is reloaded.

* [Issue 12719](https://bugs.chromium.org/p/gerrit/issues/detail?id=12719):
  Fix start --wait to track in-flight collisions and to not fail.

  Previously when an in-flight collision occurred on a push that the
  'start --wait' command  was waiting for, the command would terminate
  with an error (and if it weren't for an NPE it would stop waiting
  prematurely).

* [Issue 12720](https://bugs.chromium.org/p/gerrit/issues/detail?id=12720):
  Fix extensibility of replication configuration parsing.

  This situation was causing a regression for plugins that extend the
  replication plugin (e.g. pull-replication) because they are expecting
  a different remote configuration class.

* [Issue 12731](https://bugs.chromium.org/p/gerrit/issues/detail?id=12731):
  Don't lose state when there's a pending push to the same ref.

  Replication start --wait command would never complete when one of its
  pushes was pending since its state would never receive the completion
  notification for that push.

* [Issue 12769](https://bugs.chromium.org/p/gerrit/issues/detail?id=12769):
  Don't wait for pending events to process on startup.

  Previously, on large Gerrit installations with many projects and/or many
  replication destinations, the replication plugin could take very long
  periods of time to startup. This was particularly a problem if the
  pending (persisted) event count was large as they all were rescheduled
  before the plugin finished initializing. Change this behavior so that
  startup merely begins the process of scheduling the pending events, but
  does not wait for them to complete.

* [Issue 12779](https://bugs.chromium.org/p/gerrit/issues/detail?id=12779):
  Only fire the specified pending event URI.

  Previously the startup firing of pending events would fire every URI for
  a project ref combination on startup. To avoid duplicates, it only ever
  fired one round of every URI per project/ref combination. This had the
  side effect that if only a single URI were stored, presumably because
  the other URIs were completed before shutdown, this would result in the
  creation of way more replication events than necessary, presumably many
  duplicates of already completed pushes.

  Fix this behavior by only firing to the specific stored URI, and remove
  the duplicate project/ref filtering, since that now would prevent firing
  to more than one URI for the same project/ref combination when there
  actually are stored events for multiple URIs.

## End-to-end Tests Improvements

* [Issue 12208](https://bugs.chromium.org/p/gerrit/issues/detail?id=12208):
  Add presentation links to documentation.

* [Issue 13082](https://bugs.chromium.org/p/gerrit/issues/detail?id=13082):
  Add Eclipse support for Gatling tests.

## Dependency Updates

* [Issue 13090](https://bugs.chromium.org/p/gerrit/issues/detail?id=13090):
  Updated rules_nodejs to 2.0.0.

## Documentation Updates

## Bugfix Releases
