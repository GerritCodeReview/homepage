{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "bc9774ab_bc1d82b4",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 14,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "I think what you are describing is the desire to write software that supports more than one older schema at a time, as supporting future schemas is unlikely without upgrading your users.",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b8961e3_2882ee67",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-04-06T10:20:57Z",
      "side": 1,
      "message": "Luca told me this was related to the idea to use protobuf in the event-stream.\n\nWhile I am generally supportive of that idea, I think it wouldn\u0027t address the problems you are citing.\n\nIn general, we don\u0027t want to rename fields or change their types, not because this makes rolling upgrades harder, but because it breaks all clients that connect to the server. We already try to not break them by making changes in a backward compatible way.\n\nWith protobuf, you get\n\n* cross-language bindings\n* immutable Java datastructures (assuming we\u0027re not using nanoproto)\n* performant binary serialization\n* unknown fields that survive (de)serialization\n* decoupling of binary format and data-structures (allowing renames, and switching between singular and repeated fields)\n\nthese are valuable properties, but I don\u0027t see how these relate this the problem you\u0027re trying to solve.",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 17,
        "endChar": 76
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "277ba695_56b286fd",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-03T01:42:28Z",
      "side": 1,
      "message": "workarounded",
      "range": {
        "startLine": 19,
        "startChar": 48,
        "endLine": 19,
        "endChar": 58
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3b78ca5_a08e4273",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-05T20:38:53Z",
      "side": 1,
      "message": "I think \"worked around\" is what you\u0027re looking for.",
      "parentUuid": "277ba695_56b286fd",
      "range": {
        "startLine": 19,
        "startChar": 48,
        "endLine": 19,
        "endChar": 58
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3f0fa7ed_81dce679",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 19,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-06T07:57:29Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "e3b78ca5_a08e4273",
      "range": {
        "startLine": 19,
        "startChar": 48,
        "endLine": 19,
        "endChar": 58
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "da38c911_08cc7d08",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 21,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-04-06T10:20:57Z",
      "side": 1,
      "message": "Are you sure that this is really the problem? You\u0027re implying that the size of the JSON payloads saturates the SSH connection, which on my laptop does ~50M/sec. You can send a lot of JSON in 50 mbyte / second.",
      "range": {
        "startLine": 21,
        "startChar": 0,
        "endLine": 21,
        "endChar": 83
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4711c8a8_da3a3768",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "This is a strange thing to put in this doc, as it seems unrelated to everything else and is not mentioned as a use case to improve?",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0df68e5d_3d083415",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 23,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-06T07:57:29Z",
      "side": 1,
      "message": "I believe Marcin mentions the reduction of the payload size, do you find this a strange requirement?",
      "parentUuid": "4711c8a8_da3a3768",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a9c45ade_2db8ab7f",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "I don\u0027t think this is fundamental to that use case. I believe the use cases in this section are all specific to the rolling upgrades use case? I think that MP is perhaps fundamental to rolling upgrades, but the other way around is not true.",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "55ad5d46_e825daa7",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 29,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-06T07:57:29Z",
      "side": 1,
      "message": "I believe the compatibility is the major use-case, whilst the HA and MS are secondary effects or can be seen as a reason why we need a defined schema and associated compatibility definition and check.",
      "parentUuid": "a9c45ade_2db8ab7f",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b5b3b52_6c538f2e",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 40,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-04-04T09:54:29Z",
      "side": 1,
      "message": "nit: s/As a by product/As a product/ ?",
      "range": {
        "startLine": 40,
        "startChar": 17,
        "endLine": 40,
        "endChar": 33
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "400a228e_f9fceb89",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 42,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-04-04T09:54:29Z",
      "side": 1,
      "message": "nit: two whitespaces",
      "range": {
        "startLine": 42,
        "startChar": 45,
        "endLine": 42,
        "endChar": 47
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "656c29b3_594bb998",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 45,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "This sounds like an AC, not a use case.",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "21e80db1_6c9f5bec",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 46,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-05T20:38:53Z",
      "side": 1,
      "message": "This seems like an overly broad statement. If you delete fields from the event that the integration relies upon, we would very much expect it to break, correct? Can you narrow this to (a) more specific use case(s)?",
      "range": {
        "startLine": 45,
        "startChar": 20,
        "endLine": 46,
        "endChar": 16
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "475a3db4_c634bb01",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 48,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "Sounds like a solution",
      "range": {
        "startLine": 48,
        "startChar": 34,
        "endLine": 48,
        "endChar": 56
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7de067de_0d4b9f25",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "Can you give an example of what this means to you, because I suspect \"easy\" means different things to different people?",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d305fd51_11927732",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 49,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-05T20:38:53Z",
      "side": 1,
      "message": "This doesn\u0027t describe a problem or use case that isn\u0027t already solved. I think you can are hinting at a problem (maybe those integrations are fragile?), but I have to guess currently.",
      "range": {
        "startLine": 48,
        "startChar": 3,
        "endLine": 49,
        "endChar": 50
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1e3e961a_fbd1701e",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 51,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "Here is an example of where you are specifying a solution as a use case, yet that use case is NOT inherently met by that solution \"having events schema\". If you want to support code generation, then I think it should be in your AC (but not \"schema\").",
      "range": {
        "startLine": 51,
        "startChar": 44,
        "endLine": 51,
        "endChar": 51
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "43c1fbe9_b429aa0d",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 52,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-05T20:38:53Z",
      "side": 1,
      "message": "Can you describe the use cases where this kind of manual coding is happening currently? (or if none exist yet, where you think it would be needed)",
      "range": {
        "startLine": 52,
        "startChar": 53,
        "endLine": 52,
        "endChar": 86
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "61c2171b_36ac49bd",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-04-04T09:54:29Z",
      "side": 1,
      "message": "nit: s/well-know/well-known/",
      "range": {
        "startLine": 56,
        "startChar": 33,
        "endLine": 56,
        "endChar": 42
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "81ff6217_ef6e281b",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "Some of the criteria here seem to be dictating a solution (having a schema). It is best to word ACs as behavior you want to be able to support instead of implementations that you want. Otherwise the solution might provide the implementation that you specified and still not provide the behavior that you are seeking.",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "58f32486_4167491d",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 56,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-04-05T20:38:53Z",
      "side": 1,
      "message": "What defines a well-known standard?",
      "parentUuid": "61c2171b_36ac49bd",
      "range": {
        "startLine": 56,
        "startChar": 33,
        "endLine": 56,
        "endChar": 42
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6767385c_974c4704",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 57,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "Forward compatibility is unlikely to be achievable 100%, so you may want to specify what sorts of changes you expect to be forward compatible.\n\nYou probably want to specify how far back you expect backward compatibility to go, i.e. I don\u0027t suspect you will support Gerrit 2.7?",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a1deebf9_65b92a62",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-03T01:42:28Z",
      "side": 1,
      "message": "reasons",
      "range": {
        "startLine": 59,
        "startChar": 54,
        "endLine": 59,
        "endChar": 60
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "729d433c_b1879574",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T19:34:06Z",
      "side": 1,
      "message": "This and the bullet below seems to assume a solution with two streams?",
      "parentUuid": "a1deebf9_65b92a62",
      "range": {
        "startLine": 59,
        "startChar": 54,
        "endLine": 59,
        "endChar": 60
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e576ec0d_2dddc947",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 61,
      "author": {
        "id": 1025452
      },
      "writtenOn": "2021-04-04T09:54:29Z",
      "side": 1,
      "message": "nit: selects in which format events should be generated.",
      "range": {
        "startLine": 60,
        "startChar": 36,
        "endLine": 61,
        "endChar": 23
      },
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "70b5e056_0ae16c68",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-04-03T01:42:28Z",
      "side": 1,
      "message": "+ The format should be independent from the transport, allowing the same format to be reused across different channels:\n- SSH stream events\n- Webhooks\n- Other pub-sub events broker (e.g. RabbitMQ, Kafka, Kinesis, GCloud, others)",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "093949fe_f3034f94",
        "filename": "pages/design-docs/events-compatibility/use-cases.md",
        "patchSetId": 1
      },
      "lineNbr": 62,
      "author": {
        "id": 1003883
      },
      "writtenOn": "2021-04-05T22:46:49Z",
      "side": 1,
      "message": "\u003e + The format should be independent from the transport, allowing the same format to be reused across different channels:\n\u003e - SSH stream events\n\u003e - Webhooks\n\u003e - Other pub-sub events broker (e.g. RabbitMQ, Kafka, Kinesis, GCloud, others)\n\nI am glad that the use case is limited to events, as this helps focus things. I do think it would also make sense to suggest that it would be good if any solution provided to make rolling upgrades easier could also apply to other Gerrit interfaces such as the RestAPIs.",
      "parentUuid": "70b5e056_0ae16c68",
      "revId": "cf39454840fb5a8449726af0a859f16ea8378e76",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}