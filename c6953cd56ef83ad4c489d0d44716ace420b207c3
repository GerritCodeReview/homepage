{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "4007910d_e40214ac",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1026112
      },
      "writtenOn": "2021-11-04T08:51:14Z",
      "side": 1,
      "message": "Thanks!",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "023748a1_7c0584e5",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-11-04T07:45:24Z",
      "side": 1,
      "message": "nit: solution",
      "range": {
        "startLine": 28,
        "startChar": 27,
        "endLine": 28,
        "endChar": 34
      },
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "476d2a03_160e4093",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 28,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-11-04T09:10:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "023748a1_7c0584e5",
      "range": {
        "startLine": 28,
        "startChar": 27,
        "endLine": 28,
        "endChar": 34
      },
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79bc5e10_0bc9aecf",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-03T17:55:27Z",
      "side": 1,
      "message": "We\u0027re currently evaluating if we\u0027re going to use ES or Lucene+HA-plugin. Is there a rush to remove ES support?",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a8cf844_c777e6ec",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-11-04T09:17:42Z",
      "side": 1,
      "message": "ARAIK, the proposed removal is also related to the licensing issues with the ElasticSearch (client) which recently changed its license. Maybe someone who knows\nthe topic better can put more info here.",
      "parentUuid": "79bc5e10_0bc9aecf",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6b3613b4_a793c91f",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-11-04T09:27:02Z",
      "side": 1,
      "message": "IIRC, the client code continues to be available under Apache so it\u0027s not a licensing issue per se. However it is unmaintained, we are not aware of any production use.\n\nIf qualcomm starts using it (maybe the Amazon fork?), it would be a first production use. We\u0027d need at least another user for there to be an argument that it should be in core.",
      "parentUuid": "5a8cf844_c777e6ec",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fa96e281_b4934cab",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-04T15:44:39Z",
      "side": 1,
      "message": "\u003e IIRC, the client code continues to be available under Apache so it\u0027s not a licensing issue per se. However it is unmaintained, we are not aware of any production use.\n\nI\u0027m not aware of any prod use either and that\u0027s a significant factor we\u0027re considering.\n\n\u003e \n\u003e If qualcomm starts using it (maybe the Amazon fork?), it would be a first production use.\n\nES 7.10 and earlier are still the old license and Gerrit only supports up to 7.8.1 currently, so we\u0027d probably start with that. Beyond 7.10, yes, we\u0027d probably look at the Amazon fork or whatever else the community thought was a good option.\n\n\u003e We\u0027d need at least another user for there to be an argument that it should be in core.\n\nIs the suggestion then that ElasticSearch support be moved to a plugin? Maybe we need a maintainers discussion?\n\nJust to share a bit more here, one consideration we have for the index backend is which will give us the most accurate search results with many writes in a multi-primary setup. We haven\u0027t really started the analysis there, but from the little bit we\u0027ve looked at with ES vs HA-plugin, ES seems to allow for better support.",
      "parentUuid": "6b3613b4_a793c91f",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "028e56a1_9379f3ff",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1024147
      },
      "writtenOn": "2021-11-04T16:01:13Z",
      "side": 1,
      "message": "\u003e Is the suggestion then that ElasticSearch support be moved to a plugin? Maybe we need a maintainers discussion?\n\nit would be a libmodule (because you can\u0027t do index implementations in a plugin), but yes.\n\n\u003e Maybe we need a maintainers discussion?\n\nwe had a discussion here, https://groups.google.com/g/repo-discuss/c/iF61Or0QAWw/m/ktyHaIgGAQAJ, but we never saw much interest from anyone to invest time, hence this proposal.",
      "parentUuid": "fa96e281_b4934cab",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8f966e06_ce32aa13",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-04T16:36:27Z",
      "side": 1,
      "message": "\u003e \u003e Maybe we need a maintainers discussion?\n\u003e \n\u003e we had a discussion here, https://groups.google.com/g/repo-discuss/c/iF61Or0QAWw/m/ktyHaIgGAQAJ, but we never saw much interest from anyone to invest time, hence this proposal.\n\nWas there a request for someone to invest time? I don\u0027t see one in that discussion.\n\nWhat\u0027s the time investment needed? i.e. what\u0027s the work required to continue supporting ES?",
      "parentUuid": "028e56a1_9379f3ff",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b29f9c4_63809e81",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-11-08T09:34:45Z",
      "side": 1,
      "message": "\u003e What\u0027s the time investment needed? i.e. what\u0027s the work required to continue supporting ES?\n\nI guess that nobody knows without actually trying to do it :-)\n\nHow do we proceed from here?",
      "parentUuid": "8f966e06_ce32aa13",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3161457c_aa4cbb2f",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-08T18:20:08Z",
      "side": 1,
      "message": "\u003e \u003e What\u0027s the time investment needed? i.e. what\u0027s the work required to continue supporting ES?\n\u003e \n\u003e I guess that nobody knows without actually trying to do it :-)\n\nBut it\u0027s not broken now, correct?\n\nIt seems the concern is that it will \"break\" (incompatible license) when ES7.10 is EOL? Reading [1], I don\u0027t think that\u0027s actually a problem for (non-test code in) Gerrit as we use the low-level java REST API jar as a dependency (org.elasticsearch.client:elasticsearch-rest-client) and that will continue to be Apache v2.\n\nThat said, I don\u0027t know if anyone will want to run ES7.11+ with the license change, so we could look at trying to \"support\" OpenSearch as was discussed in that thread. I don\u0027t actually know what \"support\" looks like, but I would guess it\u0027s mostly updating [2] and bumping that es-rest-client dependency to the version noted in [3].\n\n[1] https://www.elastic.co/pricing/faq/licensing#im-using-elasticsearch-via-apis-how-does-this-change-affect-me\n\n[2] https://gerrit.googlesource.com/gerrit/+/master/javatests/com/google/gerrit/elasticsearch/ElasticContainer.java\n\n[3] https://opensearch.org/docs/latest/clients/index/#legacy-clients\n\n\u003e \n\u003e How do we proceed from here?\n\nSince we just created stable-3.5, now is our usual time to review versions of dependencies [4]. I think we need a discussion with maintainers so we can build a shared understanding of the problem and then propose solutions.\n\n[4] https://gerrit-review.googlesource.com/Documentation/dev-processes.html#upgrading-libraries",
      "parentUuid": "8b29f9c4_63809e81",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "367fc944_9422399b",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2021-11-08T19:20:10Z",
      "side": 1,
      "message": "The current ES client libraries have also broken the HTTP client dependencies making them inconsistent (see [5]).\n\nWe have been looking for volunteers for maintaining it since February and, so far, nobody committed to it.\n\nI would suggest to:\n- merge this change to document what *has been* decided\n- have a discussion (after the merge of this) on who wants to keep on maintaining ES support\n\n[5] https://gerrit-review.googlesource.com/c/gerrit/+/321528\n[6] https://www.gerritcodereview.com/2021-02-02-esc-minutes.html#elasticsearch-moved-to-sspl",
      "parentUuid": "3161457c_aa4cbb2f",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7d901e0_11b2eb33",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 41,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2021-11-08T20:58:44Z",
      "side": 1,
      "message": "\u003e The current ES client libraries have also broken the HTTP client dependencies making them inconsistent (see [5]).\n\nI think that\u0027s fixable, but doesn\u0027t seem related to this discussion?\n\n\u003e \n\u003e We have been looking for volunteers for maintaining it since February and, so far, nobody committed to it.\n\nI disagree with the \"have been looking for volunteers\" part of this statement. Where was this request made?\n\n\u003e \n\u003e I would suggest to:\n\u003e - merge this change to document what *has been* decided\n\nI have nothing against merging this change. It\u0027s just notes of the discussion.\n\nI do have concerns with the process followed to reach this decision. Project governance is clear that decisions like this are expected to be made with a consensus among maintainers except in exceptional situations. I don\u0027t believe that happened.\n\n\u003e - have a discussion (after the merge of this) on who wants to keep on maintaining ES support\n\nSure.\n\n\u003e \n\u003e [5] https://gerrit-review.googlesource.com/c/gerrit/+/321528\n\u003e [6] https://www.gerritcodereview.com/2021-02-02-esc-minutes.html#elasticsearch-moved-to-sspl",
      "parentUuid": "367fc944_9422399b",
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64146f0a_79823f88",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2021-11-04T07:45:24Z",
      "side": 1,
      "message": "nit: similar",
      "range": {
        "startLine": 59,
        "startChar": 70,
        "endLine": 59,
        "endChar": 77
      },
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e76d1499_87337d61",
        "filename": "_posts/2021-11-03-esc-minutes.md",
        "patchSetId": 1
      },
      "lineNbr": 59,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2021-11-04T09:10:22Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "64146f0a_79823f88",
      "range": {
        "startLine": 59,
        "startChar": 70,
        "endLine": 59,
        "endChar": 77
      },
      "revId": "c6953cd56ef83ad4c489d0d44716ace420b207c3",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}