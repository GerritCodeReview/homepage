{
  "comments": [
    {
      "key": {
        "uuid": "2ee24c1a_12e4de61",
        "filename": "pages/design-docs/instance-id/alternative-solution-2.md",
        "patchSetId": 13
      },
      "lineNbr": 42,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-06T15:58:46Z",
      "side": 1,
      "message": "Not relevant to this solution? (I think this should be on alternative-solution-1?)",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 84
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73fbc654_e2075d67",
        "filename": "pages/design-docs/instance-id/alternative-solution-2.md",
        "patchSetId": 13
      },
      "lineNbr": 42,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-05-06T20:34:02Z",
      "side": 1,
      "message": "Ops .. done :)",
      "parentUuid": "2ee24c1a_12e4de61",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 84
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "fd4d2c4b_d963f978",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 28,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-06T15:58:46Z",
      "side": 1,
      "message": "Will instanceId only be added to events? Are there any other APIs that should include instanceId in their responses?",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 15
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f2b07a1a_c3841011",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 28,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-05-06T20:34:02Z",
      "side": 1,
      "message": "I can\u0027t think of any API that might want to expose it.",
      "parentUuid": "fd4d2c4b_d963f978",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 15
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9c374901_2f0af91f",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 28,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-06T20:51:16Z",
      "side": 1,
      "message": "Ok. You mention troubleshooting as a use case below, so I wasn\u0027t sure if there were more places for this to be inserted for that use case to be supported.",
      "parentUuid": "f2b07a1a_c3841011",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 28,
        "endChar": 15
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02c2d77d_5b7e3656",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-06T15:58:46Z",
      "side": 1,
      "message": "s/his/This/",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 3
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d62e7dc2_f6131027",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 35,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-05-06T20:34:02Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "02c2d77d_5b7e3656",
      "range": {
        "startLine": 35,
        "startChar": 0,
        "endLine": 35,
        "endChar": 3
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9ed92108_d1a24049",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-06T15:58:46Z",
      "side": 1,
      "message": "Will any external consumers (non-plugins, like the jenkins trigger or just some user looking at stream events today) need to be modified to understand the value of the new instanceId field?",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "fc210711_3ff3986a",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-05-06T20:34:02Z",
      "side": 1,
      "message": "Yes, if the plugin needs to use that information. That\u0027s the case of the multi-site plugin for example. It will need some changes to simplify the current logic and to start using the new field.",
      "parentUuid": "9ed92108_d1a24049",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5448d9b9_cd65336b",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-06T20:51:16Z",
      "side": 1,
      "message": "What if I\u0027m just some user who is reading stream-events, do I need to do anything special? Does this break me?",
      "parentUuid": "fc210711_3ff3986a",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9a9d1e1f_13b72475",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-05-07T15:01:36Z",
      "side": 1,
      "message": "I checked the code of the plugins that might be affected and I didn\u0027t see any point where they could break. Also the field will be optional as suggested by the ESC (https://www.gerritcodereview.com/2020-05-07-esc-minutes.html#review-of-open-design-documents), hence the impact even lower.",
      "parentUuid": "5448d9b9_cd65336b",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a9e67565_0494cba1",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-07T18:01:29Z",
      "side": 1,
      "message": "That\u0027s optional per-server, not optional for the user initiating the connection. I was specifically referring to users of the SSH \u0027gerrit stream-events\u0027 command, not plugins. Are they impacted?",
      "parentUuid": "9a9d1e1f_13b72475",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a364c5eb_d79b6304",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2020-05-08T08:51:36Z",
      "side": 1,
      "message": "I see...sorry I misunderstood. If the instanceId has been set in the gerrit.config you will have it in the payload, for example:\n\n{\n  \"submitter\": {\n    \"name\": \"Administrator\",\n    \"email\": \"admin@example.com\",\n    \"username\": \"admin\"\n  },\n  \"refUpdate\": {\n    \"oldRev\": \"a69fc95c7aad5ad41c618d31548b8af835d2959a\",\n    \"newRev\": \"31da6556d638a74e5370b62f83e8007f94abb7c6\",\n    \"refName\": \"refs/changes/01/1/meta\",\n    \"project\": \"test\"\n  },\n  \"type\": \"ref-updated\",\n  \"eventCreatedOn\": 1588849085,\n  \"instanceId\": \"myInstanceId\"\n}\n\nIf the instanceId hasn\u0027t been set the payload will remain the same.",
      "parentUuid": "a9e67565_0494cba1",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a73eff7b_487ce9fe",
        "filename": "pages/design-docs/instance-id/solution.md",
        "patchSetId": 13
      },
      "lineNbr": 37,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2020-05-08T17:06:21Z",
      "side": 1,
      "message": "Ok, so any caller doing some kind of strict validation of the returned fields would have errors, but otherwise not.",
      "parentUuid": "a364c5eb_d79b6304",
      "range": {
        "startLine": 37,
        "startChar": 2,
        "endLine": 37,
        "endChar": 33
      },
      "revId": "fb88615051f6a98773fe425836e5f94979bafdab",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}