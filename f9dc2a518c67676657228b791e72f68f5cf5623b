{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3cfa8067_0b8e781e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1071857
      },
      "writtenOn": "2025-02-24T11:26:12Z",
      "side": 1,
      "message": "I think this is a great initiative and something Gerrit sorely needs.\n\nWe have some issues on the issuetracker that relate to this too.\nI only found these two, but I feel like there are more.\nhttps://issues.gerritcodereview.com/issues/40015451 \nhttps://issues.gerritcodereview.com/issues/40014088",
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "49d6c484_e7fc48a8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-24T12:13:30Z",
      "side": 1,
      "message": "This is awesome! Very appreciated.",
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee041e50_aee7c2c1",
        "filename": "pages/design-docs/http-password-with-lifetime/solution.md",
        "patchSetId": 2
      },
      "lineNbr": 39,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2025-02-24T11:57:41Z",
      "side": 1,
      "message": "How will the multiple passwords be accessed in the internal API?\n \nE.g. will there be a passwords() method on AccountState, or do you intend to have a seperate accessor similar to VersionedAuthorizedKeys? I guess the latter since you do not intent to cache the passwords? In this case we (Google) will need an abstraction layer (e.g. similar to the Accounts interface that is implemented by AccountsNoteDbImpl).\n\nI\u0027m asking because I\u0027m trying to understand what this design means for us at Google. Context, we no longer store the account data in NoteDb, but in a custom storage which is backed by a database. So we need to understand how much work this will be for us.\n\nAdding @nitzan@google.com as a reviewer since she is the expert for our internal account storage.",
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c9791693_efb1cecb",
        "filename": "pages/design-docs/http-password-with-lifetime/solution.md",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2025-02-24T10:32:30Z",
      "side": 1,
      "message": "append `Z` to make clear this is UTC ?\nsee https://en.wikipedia.org/wiki/ISO_8601\n\n```suggestion\n  expires \u003d 2025-06-01T14:30Z\n```",
      "range": {
        "startLine": 41,
        "startChar": 12,
        "endLine": 41,
        "endChar": 28
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad95d2b5_e8bfb081",
        "filename": "pages/design-docs/http-password-with-lifetime/solution.md",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-24T12:13:30Z",
      "side": 1,
      "message": "_Here\u0027s just an idea, do with it what you will:_\n\nWouldn\u0027t it be possible that `external-id-passwords` are valid but deprecated for 1-2 releases, in parallel to the multi-pass solution (and can be disabled through configuration).\nI.e. If not disabled through configuration, in the authentication context the `external-id` password is collected and added to the set of valid passwords toghether with the `expire-password`s.\n\nThat way admins could choose themselves how to deprecate the `external-id` password.\n\n1. Integrations still using external-id.\n   `legacy-passwords\u003dTrue,expire-passwords\u003dFalse`\n2. Integrations updated to use higher level APIs.\n   `legacy-passwords\u003dTrue,expire-passwords\u003dTrue`\n3. Users are notified that their old password will expire on date $DATE and they need to create a new password with expiry.\n4. At date $DATE\n   `legacy-passwords\u003dFalse,expire-passwords\u003dTrue`\n5. At release $RELEASE\n   `external-id-passwords` are removed entirely.",
      "range": {
        "startLine": 51,
        "startChar": 2,
        "endLine": 53,
        "endChar": 64
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a6bcc983_4990f1c2",
        "filename": "pages/design-docs/http-password-with-lifetime/solution.md",
        "patchSetId": 2
      },
      "lineNbr": 69,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2025-02-24T11:57:41Z",
      "side": 1,
      "message": "Should there also be an email, when a new password is added, so users can check if it wasn\u0027t them?",
      "range": {
        "startLine": 69,
        "startChar": 41,
        "endLine": 69,
        "endChar": 47
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e63c8f11_e20b3196",
        "filename": "pages/design-docs/http-password-with-lifetime/solution.md",
        "patchSetId": 2
      },
      "lineNbr": 77,
      "author": {
        "id": 1004034
      },
      "writtenOn": "2025-02-24T10:32:30Z",
      "side": 1,
      "message": "themselves",
      "range": {
        "startLine": 77,
        "startChar": 2,
        "endLine": 77,
        "endChar": 8
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2e32f31_5ab3566d",
        "filename": "pages/design-docs/http-password-with-lifetime/solution.md",
        "patchSetId": 2
      },
      "lineNbr": 77,
      "author": {
        "id": 1003935
      },
      "writtenOn": "2025-02-24T11:57:41Z",
      "side": 1,
      "message": "IIUC currently the password hash is cached as part of the external IDs in AccountState. If the password hash is no longer cached, is it the porposal to make a read from NoteDb each time the password needs to be checked?\n\nDoes this mean that in comparison to the current design lookup times for passwords increase? How much?",
      "range": {
        "startLine": 76,
        "startChar": 61,
        "endLine": 77,
        "endChar": 8
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "787f27e1_ef111e63",
        "filename": "pages/design-docs/http-password-with-lifetime/use-cases.md",
        "patchSetId": 2
      },
      "lineNbr": 13,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2025-02-24T10:11:53Z",
      "side": 1,
      "message": "What is `HTTP*`? Do you mean either `HTTP` or `HTTP_LDAP`?",
      "range": {
        "startLine": 13,
        "startChar": 59,
        "endLine": 13,
        "endChar": 64
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6ab254dc_7b66f149",
        "filename": "pages/design-docs/http-password-with-lifetime/use-cases.md",
        "patchSetId": 2
      },
      "lineNbr": 16,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2025-02-24T10:11:53Z",
      "side": 1,
      "message": "Maybe define that IDP \u003d Identity Provider",
      "range": {
        "startLine": 16,
        "startChar": 2,
        "endLine": 16,
        "endChar": 5
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "eb32fa02_be9fa778",
        "filename": "pages/design-docs/http-password-with-lifetime/use-cases.md",
        "patchSetId": 2
      },
      "lineNbr": 29,
      "author": {
        "id": 1014252
      },
      "writtenOn": "2025-02-24T12:13:30Z",
      "side": 1,
      "message": "I think these are two use-cases:\n\n\n```suggestion\n* Replacing an old password with a new is less disruptive if both passwords\n  can be valid simultaneously so as to not break f.i. automation between\n  requesting a new password and replacing the old.\n* Exposure is significantly reduced if users can requests short-lived passwords\n  for development, proof-of-concepts etc. instead of using their long lived\n  credentials outside of their local environment.\n```\nOr maybe even three?\n```\n* When finnished replacing the old password it would further reduce exposure if\n  the user can manually invalidate the old password.\n```",
      "range": {
        "startLine": 27,
        "startChar": 0,
        "endLine": 29,
        "endChar": 76
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "54dc02c0_600ecf11",
        "filename": "pages/design-docs/http-password-with-lifetime/use-cases.md",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2025-02-24T10:11:53Z",
      "side": 1,
      "message": ",",
      "range": {
        "startLine": 41,
        "startChar": 23,
        "endLine": 41,
        "endChar": 24
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "90bb07c4_59a1b35f",
        "filename": "pages/design-docs/http-password-with-lifetime/use-cases.md",
        "patchSetId": 2
      },
      "lineNbr": 68,
      "author": {
        "id": 1003873
      },
      "writtenOn": "2025-02-24T10:11:53Z",
      "side": 1,
      "message": ",",
      "range": {
        "startLine": 68,
        "startChar": 54,
        "endLine": 68,
        "endChar": 55
      },
      "revId": "f9dc2a518c67676657228b791e72f68f5cf5623b",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}