# Gerrit 2.16 *(In development)*

[TOC]

## Release Highlights

* Inline editing support in PolyGerrit UI.

* Redesigned UI for PolyGerrit based on material.

## Important Notes

### Schema Changes

This release contains schema changes. To upgrade:

``` sh
  java -jar gerrit.war init -d site_path
```

### Reindex for new projects index and changed group index

Gerrit 2.16 introduces a new secondary index for projects. The initial version
of this index must be created by running the offline reindex before starting
Gerrit:

``` sh
  java -jar gerrit.war reindex --index projects -d site_path
```

The group index got two new fields upon which Gerrit 2.16 depends. For this
reason, the following command to offline reindex the group index must be
executed as well:

``` sh
  java -jar gerrit.war reindex --index groups -d site_path
```

The offline reindex for groups should also be run for Gerrit slave hosts.

Note that it is not necessary to reindex the changes and accounts indexes
offline. These will automatically be reindexed by the online reindexer after
starting Gerrit.

### Support for Velocity templates removed

In [version 2.14](2.14.md) support for Soy templates was added. For backwards
compatibility, support for Velocity templates (VTL) was kept.

In version 2.16 support for VTL is completely removed. Site administrators must
replace any Velocity templates (`.vm` files in `$site/etc/mail/`) with the equivalent
Soy templates before upgrading to this version.

### Push to refs/changes is deprecated

The possibility to push to `refs/changes` is now disabled by default.  It is
still possible to enable it in the gerrit config by setting
[receive.allowPushToRefsChanges](https://gerrit-documentation.storage.googleapis.com/Documentation/2.16/config-gerrit.html#receive.allowPushToRefsChanges)
to true.

## New Features

### REST API

## Dependency Updates

* Update Brics Automaton to 1.12-1

* Update commons-lang3 to 3.6

* Update Dropwizard metrics-core to 3.2.5

* Update elasticsearch to 2.4.6

* Update greenmail to 1.5.5

* Update gson to 2.8.2

* Update javax.mail to 1.6.0

* Update protobuf-java to 3.4.0

* Update soy to 2017-08-08

* Update tukaani-xz to 1.6

* Remove dependency on Velocity

## Plugin API changes

* The class `com.google.gerrit.server.api.accounts.AccountExternalIdCreator` was
  moved to `com.google.gerrit.server.account.AccountExternalIdCreator`.
